(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();var _e,w,Ge,Je,H,Ae,Ke,Ze,Qe,Ee,we,ke,J={},et=[],kt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,de=Array.isArray;function R(t,e){for(var i in e)t[i]=e[i];return t}function Pe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function bt(t,e,i){var n,r,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?_e.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return se(t,o,n,r,null)}function se(t,e,i,n,r){var s={type:t,props:e,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ge,__i:-1,__u:0};return r==null&&w.vnode!=null&&w.vnode(s),s}function K(t){return t.children}function V(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?z(t):null}function tt(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return tt(t)}}function Me(t){(!t.__d&&(t.__d=!0)&&H.push(t)&&!oe.__r++||Ae!=w.debounceRendering)&&((Ae=w.debounceRendering)||Ke)(oe)}function oe(){for(var t,e,i,n,r,s,o,l=1;H.length;)H.length>l&&H.sort(Ze),t=H.shift(),l=H.length,t.__d&&(i=void 0,n=void 0,r=(n=(e=t).__v).__e,s=[],o=[],e.__P&&((i=R({},n)).__v=n.__v+1,w.vnode&&w.vnode(i),Ie(e.__P,i,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??z(n),!!(32&n.__u),o),i.__v=n.__v,i.__.__k[i.__i]=i,st(s,i,o),n.__e=n.__=null,i.__e!=r&&tt(i)));oe.__r=0}function it(t,e,i,n,r,s,o,l,_,c,p){var a,m,f,T,O,E,k,b=n&&n.__k||et,A=e.length;for(_=xt(i,e,b,_,A),a=0;a<A;a++)(f=i.__k[a])!=null&&(m=f.__i==-1?J:b[f.__i]||J,f.__i=a,E=Ie(t,f,m,r,s,o,l,_,c,p),T=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&Oe(m.ref,null,f),p.push(f.ref,f.__c||T,f)),O==null&&T!=null&&(O=T),(k=!!(4&f.__u))||m.__k===f.__k?_=nt(f,_,t,k):typeof f.type=="function"&&E!==void 0?_=E:T&&(_=T.nextSibling),f.__u&=-7);return i.__e=O,_}function xt(t,e,i,n,r){var s,o,l,_,c,p=i.length,a=p,m=0;for(t.__k=new Array(r),s=0;s<r;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(_=s+m,(o=t.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?se(null,o,null,null,null):de(o)?se(K,{children:o},null,null,null):o.constructor==null&&o.__b>0?se(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,l=null,(c=o.__i=St(o,i,_,a))!=-1&&(a--,(l=i[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(r>p?m--:r<p&&m++),typeof o.type!="function"&&(o.__u|=4)):c!=_&&(c==_-1?m--:c==_+1?m++:(c>_?m--:m++,o.__u|=4))):t.__k[s]=null;if(a)for(s=0;s<p;s++)(l=i[s])!=null&&(2&l.__u)==0&&(l.__e==n&&(n=z(l)),at(l,l));return n}function nt(t,e,i,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=nt(r[s],e,i,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=z(t)),i.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function St(t,e,i,n){var r,s,o,l=t.key,_=t.type,c=e[i],p=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||p&&l==c.key&&_==c.type)return i;if(n>(p?1:0)){for(r=i-1,s=i+1;r>=0||s<e.length;)if((c=e[o=r>=0?r--:s++])!=null&&(2&c.__u)==0&&l==c.key&&_==c.type)return o}return-1}function Ce(t,e,i){e[0]=="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||kt.test(e)?i:i+"px"}function te(t,e,i,n,r){var s,o;e:if(e=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)i&&e in i||Ce(t.style,e,"");if(i)for(e in i)n&&i[e]==n[e]||Ce(t.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Qe,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=i,i?n?i.u=n.u:(i.u=Ee,t.addEventListener(e,s?ke:we,s)):t.removeEventListener(e,s?ke:we,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&i==1?"":i))}}function Ue(t){return function(e){if(this.l){var i=this.l[e.type+t];if(e.t==null)e.t=Ee++;else if(e.t<i.u)return;return i(w.event?w.event(e):e)}}}function Ie(t,e,i,n,r,s,o,l,_,c){var p,a,m,f,T,O,E,k,b,A,M,Q,B,Re,ee,q,he,L=e.type;if(e.constructor!=null)return null;128&i.__u&&(_=!!(32&i.__u),s=[l=e.__e=i.__e]),(p=w.__b)&&p(e);e:if(typeof L=="function")try{if(k=e.props,b="prototype"in L&&L.prototype.render,A=(p=L.contextType)&&n[p.__c],M=p?A?A.props.value:p.__:n,i.__c?E=(a=e.__c=i.__c).__=a.__E:(b?e.__c=a=new L(k,M):(e.__c=a=new V(k,M),a.constructor=L,a.render=Tt),A&&A.sub(a),a.props=k,a.state||(a.state={}),a.context=M,a.__n=n,m=a.__d=!0,a.__h=[],a._sb=[]),b&&a.__s==null&&(a.__s=a.state),b&&L.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=R({},a.__s)),R(a.__s,L.getDerivedStateFromProps(k,a.__s))),f=a.props,T=a.state,a.__v=e,m)b&&L.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),b&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(b&&L.getDerivedStateFromProps==null&&k!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(k,M),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(k,a.__s,M)===!1||e.__v==i.__v){for(e.__v!=i.__v&&(a.props=k,a.state=a.__s,a.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(j){j&&(j.__=e)}),Q=0;Q<a._sb.length;Q++)a.__h.push(a._sb[Q]);a._sb=[],a.__h.length&&o.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(k,a.__s,M),b&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,T,O)})}if(a.context=M,a.props=k,a.__P=t,a.__e=!1,B=w.__r,Re=0,b){for(a.state=a.__s,a.__d=!1,B&&B(e),p=a.render(a.props,a.state,a.context),ee=0;ee<a._sb.length;ee++)a.__h.push(a._sb[ee]);a._sb=[]}else do a.__d=!1,B&&B(e),p=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++Re<25);a.state=a.__s,a.getChildContext!=null&&(n=R(R({},n),a.getChildContext())),b&&!m&&a.getSnapshotBeforeUpdate!=null&&(O=a.getSnapshotBeforeUpdate(f,T)),q=p,p!=null&&p.type===K&&p.key==null&&(q=rt(p.props.children)),l=it(t,de(q)?q:[q],e,i,n,r,s,o,l,_,c),a.base=e.__e,e.__u&=-161,a.__h.length&&o.push(a),E&&(a.__E=a.__=null)}catch(j){if(e.__v=null,_||s!=null)if(j.then){for(e.__u|=_?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,e.__e=l}else{for(he=s.length;he--;)Pe(s[he]);be(e)}else e.__e=i.__e,e.__k=i.__k,j.then||be(e);w.__e(j,e,i)}else s==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):l=e.__e=$t(i.__e,e,i,n,r,s,o,_,c);return(p=w.diffed)&&p(e),128&e.__u?void 0:l}function be(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(be)}function st(t,e,i){for(var n=0;n<i.length;n++)Oe(i[n],i[++n],i[++n]);w.__c&&w.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){w.__e(s,r.__v)}})}function rt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:de(t)?t.map(rt):R({},t)}function $t(t,e,i,n,r,s,o,l,_){var c,p,a,m,f,T,O,E=i.props,k=e.props,b=e.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){t=f,s[c]=null;break}}if(t==null){if(b==null)return document.createTextNode(k);t=document.createElementNS(r,b,k.is&&k),l&&(w.__m&&w.__m(e,s),l=!1),s=null}if(b==null)E===k||l&&t.data==k||(t.data=k);else{if(s=s&&_e.call(t.childNodes),E=i.props||J,!l&&s!=null)for(E={},c=0;c<t.attributes.length;c++)E[(f=t.attributes[c]).name]=f.value;for(c in E)if(f=E[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=f;else if(!(c in k)){if(c=="value"&&"defaultValue"in k||c=="checked"&&"defaultChecked"in k)continue;te(t,c,null,f,r)}}for(c in k)f=k[c],c=="children"?m=f:c=="dangerouslySetInnerHTML"?p=f:c=="value"?T=f:c=="checked"?O=f:l&&typeof f!="function"||E[c]===f||te(t,c,f,E[c],r);if(p)l||a&&(p.__html==a.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(a&&(t.innerHTML=""),it(e.type=="template"?t.content:t,de(m)?m:[m],e,i,n,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:i.__k&&z(i,0),l,_),s!=null)for(c=s.length;c--;)Pe(s[c]);l||(c="value",b=="progress"&&T==null?t.removeAttribute("value"):T!=null&&(T!==t[c]||b=="progress"&&!T||b=="option"&&T!=E[c])&&te(t,c,T,E[c],r),c="checked",O!=null&&O!=t[c]&&te(t,c,O,E[c],r))}return t}function Oe(t,e,i){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(r){w.__e(r,i)}}function at(t,e,i){var n,r;if(w.unmount&&w.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||Oe(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){w.__e(s,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&at(n[r],e,i||typeof t.type!="function");i||Pe(t.__e),t.__c=t.__=t.__e=void 0}function Tt(t,e,i){return this.constructor(t,i)}function Le(t,e,i){var n,r,s,o;e==document&&(e=document.documentElement),w.__&&w.__(t,e),r=(n=!1)?null:e.__k,s=[],o=[],Ie(e,t=e.__k=bt(K,null,[t]),r||J,J,e.namespaceURI,r?null:e.firstChild?_e.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,o),st(s,t,o)}_e=et.slice,w={__e:function(t,e,i,n){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),o=r.__d),o)return r.__E=r}catch(l){t=l}throw t}},Ge=0,Je=function(t){return t!=null&&t.constructor==null},V.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=R({},this.state),typeof t=="function"&&(t=t(R({},i),this.props)),t&&R(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),Me(this))},V.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Me(this))},V.prototype.render=K,H=[],Ke=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ze=function(t,e){return t.__v.__b-e.__v.__b},oe.__r=0,Qe=/(PointerCapture)$|Capture$/i,Ee=0,we=Ue(!1),ke=Ue(!0);var Et=0;function d(t,e,i,n,r,s){e||(e={});var o,l,_=e;if("ref"in _)for(l in _={},e)l=="ref"?o=e[l]:_[l]=e[l];var c={type:t,props:_,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Et,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(l in o)_[l]===void 0&&(_[l]=o[l]);return w.vnode&&w.vnode(c),c}var le,S,pe,He,xe=0,ot=[],$=w,De=$.__b,je=$.__r,We=$.diffed,ze=$.__c,Fe=$.unmount,Xe=$.__;function lt(t,e){$.__h&&$.__h(S,t,xe||e),xe=0;var i=S.__H||(S.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function Pt(t){return xe=1,It(ct,t)}function It(t,e,i){var n=lt(le++,2);if(n.t=t,!n.__c&&(n.__=[ct(void 0,e),function(l){var _=n.__N?n.__N[0]:n.__[0],c=n.t(_,l);_!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=S,!S.__f)){var r=function(l,_,c){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(m){return!!m.__c});if(p.every(function(m){return!m.__N}))return!s||s.call(this,l,_,c);var a=n.__c.props!==l;return p.forEach(function(m){if(m.__N){var f=m.__[0];m.__=m.__N,m.__N=void 0,f!==m.__[0]&&(a=!0)}}),s&&s.call(this,l,_,c)||a};S.__f=!0;var s=S.shouldComponentUpdate,o=S.componentWillUpdate;S.componentWillUpdate=function(l,_,c){if(this.__e){var p=s;s=void 0,r(l,_,c),s=p}o&&o.call(this,l,_,c)},S.shouldComponentUpdate=r}return n.__N||n.__}function Ot(t,e){var i=lt(le++,7);return Rt(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function Lt(){for(var t;t=ot.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(re),t.__H.__h.forEach(Se),t.__H.__h=[]}catch(e){t.__H.__h=[],$.__e(e,t.__v)}}$.__b=function(t){S=null,De&&De(t)},$.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Xe&&Xe(t,e)},$.__r=function(t){je&&je(t),le=0;var e=(S=t.__c).__H;e&&(pe===S?(e.__h=[],S.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(re),e.__h.forEach(Se),e.__h=[],le=0)),pe=S},$.diffed=function(t){We&&We(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ot.push(e)!==1&&He===$.requestAnimationFrame||((He=$.requestAnimationFrame)||Nt)(Lt)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),pe=S=null},$.__c=function(t,e){e.some(function(i){try{i.__h.forEach(re),i.__h=i.__h.filter(function(n){return!n.__||Se(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],$.__e(n,i.__v)}}),ze&&ze(t,e)},$.unmount=function(t){Fe&&Fe(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(n){try{re(n)}catch(r){e=r}}),i.__H=void 0,e&&$.__e(e,i.__v))};var Ye=typeof requestAnimationFrame=="function";function Nt(t){var e,i=function(){clearTimeout(n),Ye&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(i,35);Ye&&(e=requestAnimationFrame(i))}function re(t){var e=S,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),S=e}function Se(t){var e=S;t.__c=t.__(),S=e}function Rt(t,e){return!t||t.length!==e.length||e.some(function(i,n){return i!==t[n]})}function ct(t,e){return typeof e=="function"?e(t):e}var At=Symbol.for("preact-signals");function fe(){if(U>1)U--;else{for(var t,e=!1;G!==void 0;){var i=G;for(G=void 0,$e++;i!==void 0;){var n=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&dt(i))try{i.c()}catch(r){e||(t=r,e=!0)}i=n}}if($e=0,U--,e)throw t}}function Mt(t){if(U>0)return t();U++;try{return t()}finally{fe()}}var y=void 0;function ut(t){var e=y;y=void 0;try{return t()}finally{y=e}}var G=void 0,U=0,$e=0,ce=0;function _t(t){if(y!==void 0){var e=t.n;if(e===void 0||e.t!==y)return e={i:0,S:t,p:y.s,n:void 0,t:y,e:void 0,x:void 0,r:e},y.s!==void 0&&(y.s.n=e),y.s=e,t.n=e,32&y.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=y.s,e.n=void 0,y.s.n=e,y.s=e),e}}function P(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}P.prototype.brand=At;P.prototype.h=function(){return!0};P.prototype.S=function(t){var e=this,i=this.t;i!==t&&t.e===void 0&&(t.x=i,this.t=t,i!==void 0?i.e=t:ut(function(){var n;(n=e.W)==null||n.call(e)}))};P.prototype.U=function(t){var e=this;if(this.t!==void 0){var i=t.e,n=t.x;i!==void 0&&(i.x=n,t.e=void 0),n!==void 0&&(n.e=i,t.x=void 0),t===this.t&&(this.t=n,n===void 0&&ut(function(){var r;(r=e.Z)==null||r.call(e)}))}};P.prototype.subscribe=function(t){var e=this;return Z(function(){var i=e.value,n=y;y=void 0;try{t(i)}finally{y=n}},{name:"sub"})};P.prototype.valueOf=function(){return this.value};P.prototype.toString=function(){return this.value+""};P.prototype.toJSON=function(){return this.value};P.prototype.peek=function(){var t=y;y=void 0;try{return this.value}finally{y=t}};Object.defineProperty(P.prototype,"value",{get:function(){var t=_t(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if($e>100)throw new Error("Cycle detected");this.v=t,this.i++,ce++,U++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{fe()}}}});function F(t,e){return new P(t,e)}function dt(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function ft(t){for(var e=t.s;e!==void 0;e=e.n){var i=e.S.n;if(i!==void 0&&(e.r=i),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function ht(t){for(var e=t.s,i=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):i=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=i}function D(t,e){P.call(this,void 0),this.x=t,this.s=void 0,this.g=ce-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}D.prototype=new P;D.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ce))return!0;if(this.g=ce,this.f|=1,this.i>0&&!dt(this))return this.f&=-2,!0;var t=y;try{ft(this),y=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return y=t,ht(this),this.f&=-2,!0};D.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}P.prototype.S.call(this,t)};D.prototype.U=function(t){if(this.t!==void 0&&(P.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};D.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(D.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=_t(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Be(t,e){return new D(t,e)}function pt(t){var e=t.u;if(t.u=void 0,typeof e=="function"){U++;var i=y;y=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,Ne(t),n}finally{y=i,fe()}}}function Ne(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,pt(t)}function Ct(t){if(y!==this)throw new Error("Out-of-order effect");ht(this),y=t,this.f&=-2,8&this.f&&Ne(this),fe()}function X(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}X.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};X.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,pt(this),ft(this),U++;var t=y;return y=this,Ct.bind(this,t)};X.prototype.N=function(){2&this.f||(this.f|=2,this.o=G,G=this)};X.prototype.d=function(){this.f|=8,1&this.f||Ne(this)};X.prototype.dispose=function(){this.d()};function Z(t,e){var i=new X(t,e);try{i.c()}catch(r){throw i.d(),r}var n=i.d.bind(i);return n[Symbol.dispose]=n,n}var vt,ve,mt=[];Z(function(){vt=this.N})();function Y(t,e){w[t]=e.bind(null,w[t]||function(){})}function ue(t){ve&&ve(),ve=t&&t.S()}function gt(t){var e=this,i=t.data,n=Ht(i);n.value=i;var r=Ot(function(){for(var l=e,_=e.__v;_=_.__;)if(_.__c){_.__c.__$f|=4;break}var c=Be(function(){var f=n.value.value;return f===0?0:f===!0?"":f||""}),p=Be(function(){return!Array.isArray(c.value)&&!Je(c.value)}),a=Z(function(){if(this.N=yt,p.value){var f=c.value;l.__v&&l.__v.__e&&l.__v.__e.nodeType===3&&(l.__v.__e.data=f)}}),m=e.__$u.d;return e.__$u.d=function(){a(),m.call(this)},[p,c]},[]),s=r[0],o=r[1];return s.value?o.peek():o.value}gt.displayName="ReactiveTextNode";Object.defineProperties(P.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:gt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Y("__b",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof e.type=="string"){var i,n=e.props;for(var r in n)if(r!=="children"){var s=n[r];s instanceof P&&(i||(e.__np=i={}),i[r]=s,n[r]=s.peek())}}t(e)});Y("__r",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(e.type.displayName||e.type.name||"Unknown"),e.type!==K){ue();var i,n=e.__c;n&&(n.__$f&=-2,(i=n.__$u)===void 0&&(n.__$u=i=(function(r){var s;return Z(function(){s=this}),s.c=function(){n.__$f|=1,n.setState({})},s})())),ue(i)}t(e)});Y("__e",function(t,e,i,n){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ue(),t(e,i,n)});Y("diffed",function(t,e){typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ue();var i;if(typeof e.type=="string"&&(i=e.__e)){var n=e.__np,r=e.props;if(n){var s=i.U;if(s)for(var o in s){var l=s[o];l!==void 0&&!(o in n)&&(l.d(),s[o]=void 0)}else s={},i.U=s;for(var _ in n){var c=s[_],p=n[_];c===void 0?(c=Ut(i,_,p,r),s[_]=c):c.o(p,r)}}}t(e)});function Ut(t,e,i,n){var r=e in t&&t.ownerSVGElement===void 0,s=F(i);return{o:function(o,l){s.value=o,n=l},d:Z(function(){this.N=yt;var o=s.value.value;n[e]!==o&&(n[e]=o,r?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}Y("unmount",function(t,e){if(typeof e.type=="string"){var i=e.__e;if(i){var n=i.U;if(n){i.U=void 0;for(var r in n){var s=n[r];s&&s.d()}}}}else{var o=e.__c;if(o){var l=o.__$u;l&&(o.__$u=void 0,l.d())}}t(e)});Y("__h",function(t,e,i,n){(n<3||n===9)&&(e.__$f|=2),t(e,i,n)});V.prototype.shouldComponentUpdate=function(t,e){var i=this.__$u,n=i&&i.s!==void 0;for(var r in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(n||s||4&this.__$f)||1&this.__$f)return!0}else if(!(n||4&this.__$f)||3&this.__$f)return!0;for(var o in t)if(o!=="__source"&&t[o]!==this.props[o])return!0;for(var l in this.props)if(!(l in t))return!0;return!1};function Ht(t,e){return Pt(function(){return F(t,e)})[0]}var Dt=function(t){queueMicrotask(function(){queueMicrotask(t)})};function jt(){Mt(function(){for(var t;t=mt.shift();)vt.call(t)})}function yt(){mt.push(this)===1&&(w.requestAnimationFrame||Dt)(jt)}const Wt={id:"nhentai",name:"nHentai"},zt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));let x=null;const W=[];async function qe(){const t=(await(await fetch("/api/drivers/pixiv/discovery")).json()).body.illusts,e=t[Math.floor(Math.random()*t.length)],i=(await(await fetch(`/api/drivers/pixiv/pages/${e.id}`)).json()).body,n=Math.floor(Math.random()*e.pageCount),r=i[n].urls.original.split("/");return{id:`${e.id}`,page:n+1,url:`/resource/pixiv/${r.slice(5,11).join("-")}/${r[11]}`,source:`${e.id}/${n+1}`}}const Ft={id:"pixiv",name:"Pixiv",async next(t){const e=t.split("/").map(i=>i.trim()).filter(i=>i.length>0);if(e.length>0){if(x===null||e[0]!==x.id)x={id:e[0],pages:(await(await fetch(`/api/drivers/pixiv/pages/${e[0]}`)).json()).body.map(i=>{const n=i.urls.original.split("/");return`/resource/pixiv/${n.slice(5,11).join("-")}/${n[11]}`}),index:e.length>1?parseInt(e[1])-1:0,cacheIndex:e.length>1?parseInt(e[1])-1:0};else{const i=isNaN(parseInt(e[1]))?1:parseInt(e[1])-1;x.index=i===x.index?x.index+1:i}return x.index>=x.pages.length?(x=null,await this.next("")):{id:x.id,page:x.index+1,url:x.pages[x.index],source:`${x.id}/${x.index+1}`}}return W.length>0?Object.assign(W.splice(0,1)[0],{source:""}):Object.assign(await qe(),{source:""})},preload:async t=>{if(x===null){if(W.length<t){const e=W[W.push(await qe())-1];return{id:e.id,page:e.page,url:e.url,amount:W.length}}}else if(x.cacheIndex<Math.min(x.index+t,x.pages.length))return x.cacheIndex++,{id:x.id,page:x.cacheIndex,url:x.pages[x.cacheIndex-1],amount:x.cacheIndex-x.index};return null}},Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Ve=Object.assign({"./drivers/nhentai.ts":zt,"./drivers/pixiv.ts":Xt});let me=null;class g{static canvas=document.createElement("canvas");static ctx=this.canvas.getContext("2d");static drivers={pixiv:Ve["./drivers/pixiv.ts"].default,nhentai:Ve["./drivers/nhentai.ts"].default};static data=null;static timestamp=0;static async next(e){const i=this.data,n=performance.now();this.data=null,this.timestamp=performance.now(),me=me===null?u.addTask("success","Load",e===void 0?u.source.value:e):u.updateTask(me,{type:"success",message:e===void 0?u.source.value:e});try{const r=await this.drivers[u.source.driver].next(e===void 0?u.source.value:e);if(r===null)this.data=i;else{u.updateSource({value:r.source,display:`${r.id}/${r.page}`});const s=document.createElement("img");s.src=r.url,s.addEventListener("load",()=>{this.timestamp===n&&(this.data={id:r.id,page:r.page,element:s,transform:this.calculateTransform(s.width,s.height),info:`${s.width} x ${s.height} (${s.src.substring(s.src.lastIndexOf(".")+1).toUpperCase()})`,strokes:[]},this.canvas.width=s.width,this.canvas.height=s.height)})}}catch{this.data=i}}static update(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,this.data!==null&&(this.ctx.fillStyle="rgba(0,255,0,0.5)",this.ctx.strokeStyle="rgba(0,255,0,0.5)",(h.strokeType===1||h.strokeType===2)&&h.startX!==null&&h.startY!==null&&(this.ctx.lineCap=h.strokeType===1?"butt":"round",this.ctx.lineWidth=(this.data.element.width+this.data.element.height)*(h.strokeSize*.0025),this.ctx.moveTo(h.startX,h.startY),this.ctx.lineTo(h.mouse.imageX,h.mouse.imageY),this.ctx.stroke(),this.ctx.beginPath()))}static async preload(){return await g.drivers[u.source.driver].preload(u.settings.preload)}static updateTransform(){this.data!==null&&(this.data.transform=this.calculateTransform(this.data.element.width,this.data.element.height))}static calculateTransform(e,i){const n=v.canvas.width/v.canvas.height,r=e/i;let s,o;r>n?(s=v.canvas.width,o=v.canvas.width/r):(s=v.canvas.height*r,o=v.canvas.height);const l=3.5*parseFloat(getComputedStyle(document.documentElement).fontSize)*u.settings.resolution;return s*=.9,o*=.9,o-=l/2,{x:(v.canvas.width-s)/2,y:(v.canvas.height+l-o)/2,width:s,height:o,widthScale:s/e,heightScale:o/i}}}function wt(t,e){return localStorage.hasOwnProperty(t)?JSON.parse(localStorage.getItem(t)):e}const ge=F({help:!1,settings:!1,tasks:!1,entries:!1}),ie=F(wt("settings",{username:"unknown",fps:0,resolution:window.devicePixelRatio,preload:5,moveSpeed:1,scaleSpeed:1,reduceTransparency:!1})),ne=F(wt("source",{driver:Object.keys(g.drivers)[0],value:"",display:""})),N={},C=F([]);class u{static get layout(){return ge.value}static get settings(){return ie.value}static get source(){return ne.value}static get taskMap(){return N}static get taskList(){return C.value}static updateLayout(e){ge.value={...ge.value,...e}}static updateSettings(e){ie.value={...ie.value,...e},localStorage.setItem("settings",JSON.stringify(ie.value))}static updateSource(e){ne.value={...ne.value,...e},localStorage.setItem("source",JSON.stringify(ne.value))}static addTask(e,i,n){const r=Symbol();return N[r]={type:e,title:i,message:n},C.value=Reflect.ownKeys(N),r}static updateTask(e,i){return N.hasOwnProperty(e)&&(N[e]=Object.assign(N[e],i),C.value=Reflect.ownKeys(N)),e}static removeTask(e){return N.hasOwnProperty(e)&&(delete N[e],C.value=[...C.value.slice(0,C.value.indexOf(e)),...C.value.slice(C.value.indexOf(e)+1)]),null}}class h{static mouse={button:{left:0,right:0},editorX:0,editorY:0,imageX:0,imageY:0};static keyboard=new Map;static strokeType=1;static strokeSize=2;static strokePoints=[];static startX=null;static startY=null;static moveIndex=null;static strokeOpacity=1;static saveConfirm=0;static update(e){g.data!==null&&(h.mouse.imageX=(h.mouse.editorX/v.camera.scale+(v.camera.x-g.data.transform.x))/g.data.transform.widthScale,h.mouse.imageY=(h.mouse.editorY/v.camera.scale+(v.camera.y-g.data.transform.y))/g.data.transform.heightScale,this.mouse.button.left===1&&(this.strokeType==1||this.strokeType===2)?(this.startX=this.mouse.imageX,this.startY=this.mouse.imageY):this.mouse.button.left===3&&(h.strokeType===1||h.strokeType===2)&&h.startX!==null&&h.startY!==null&&(g.data.strokes.push({type:h.strokeType,size:h.strokeSize,x1:h.startX,y1:h.startY,x2:h.mouse.imageX,y2:h.mouse.imageY}),h.startX=null,h.startY=null)),this.keyboard.get("1")===1?(this.strokeType=1,this.strokePoints=[]):this.keyboard.get("2")===1?(this.strokeType=2,this.strokePoints=[]):this.keyboard.get("3")===1&&(this.strokeType=3,this.startX=null,this.startY=null),this.keyboard.get("-")?(h.strokeSize-=1,h.strokeSize=Math.min(100/v.camera.scale,Math.max(.5/v.camera.scale,h.strokeSize))):this.keyboard.get("+")&&(h.strokeSize+=1,h.strokeSize=Math.min(100/v.camera.scale,Math.max(.5/v.camera.scale,h.strokeSize))),this.keyboard.has("a")?v.camera.xSpeed=-3*u.settings.moveSpeed:this.keyboard.has("d")&&(v.camera.xSpeed=3*u.settings.moveSpeed),this.keyboard.has("w")?v.camera.ySpeed=-3*u.settings.moveSpeed:this.keyboard.has("s")&&(v.camera.ySpeed=3*u.settings.moveSpeed),this.keyboard.has("q")?v.camera.scaleSpeed=-.005*u.settings.scaleSpeed:this.keyboard.has("e")&&(v.camera.scaleSpeed=.005*u.settings.scaleSpeed),this.keyboard.get("r")===1?v.reset():this.keyboard.get("f")===1&&(this.strokeOpacity-=.5,this.strokeOpacity<0&&(this.strokeOpacity=1)),this.keyboard.get("z")===1?g.next():this.keyboard.get("x")===1?this.strokePoints.length>0?this.strokePoints.splice(this.strokePoints.length-1):g.data!==null&&g.data.strokes.length>0&&g.data.strokes.splice(g.data.strokes.length-1):this.keyboard.get("c"),this.mouse.button.left===1?this.mouse.button.left=2:this.mouse.button.left===3&&(this.mouse.button.left=0),this.mouse.button.right===1?this.mouse.button.right=2:this.mouse.button.right===3&&(this.mouse.button.right=0),this.keyboard.forEach((i,n)=>{this.keyboard.set(n,2)})}}window.addEventListener("mousedown",t=>{t.button===0?h.mouse.button.left=1:t.button===2&&(h.mouse.button.right=1)});window.addEventListener("mouseup",t=>{t.button===0?h.mouse.button.left=3:t.button===2&&(h.mouse.button.right=3)});window.addEventListener("mousemove",t=>{h.mouse.editorX=t.x*u.settings.resolution,h.mouse.editorY=t.y*u.settings.resolution,g.data!==null&&(h.mouse.imageX=(h.mouse.editorX/v.camera.scale+(v.camera.x-g.data.transform.x))/g.data.transform.widthScale,h.mouse.imageY=(h.mouse.editorY/v.camera.scale+(v.camera.y-g.data.transform.y))/g.data.transform.heightScale)});window.addEventListener("keydown",t=>{t.target===document.body&&(h.keyboard.has(t.key)||h.keyboard.set(t.key,1))});window.addEventListener("keyup",t=>{h.keyboard.delete(t.key)});class v{static canvas=document.getElementById("canvas-main");static ctx=this.canvas.getContext("2d");static camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0};static resize(){const e=this.canvas.getBoundingClientRect();this.canvas.width=e.width*u.settings.resolution,this.canvas.height=e.height*u.settings.resolution,g.updateTransform(),u.settings.fps!==0&&this.update(0)}static reset(){this.camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0}}static update(e){const i=this.camera.x,n=this.camera.y,r=this.camera.scale;this.camera.scale*=1+this.camera.scaleSpeed*e,this.camera.scale=Math.min(500,this.camera.scale);const s=i+h.mouse.editorX/r,o=n+h.mouse.editorY/r,l=this.camera.scale/r;if(this.camera.x=s+(i-s)/l,this.camera.y=o+(n-o)/l,this.camera.x+=this.camera.xSpeed*e/this.camera.scale*u.settings.resolution,this.camera.y+=this.camera.ySpeed*e/this.camera.scale*u.settings.resolution,this.camera.xSpeed*=Math.pow(.99,e),this.camera.ySpeed*=Math.pow(.99,e),this.camera.scaleSpeed*=Math.pow(.99,e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,g.data!==null){const _=g.data.transform;this.ctx.drawImage(g.data.element,(_.x-this.camera.x)*this.camera.scale,(_.y-this.camera.y)*this.camera.scale,_.width*this.camera.scale,_.height*this.camera.scale),g.update(),this.ctx.drawImage(g.canvas,(_.x-this.camera.x)*this.camera.scale,(_.y-this.camera.y)*this.camera.scale,_.width*this.camera.scale,_.height*this.camera.scale)}}}window.addEventListener("load",()=>{v.resize(),window.addEventListener("resize",()=>v.resize())});v.canvas.addEventListener("contextmenu",t=>{t.preventDefault()});v.canvas.addEventListener("click",()=>{u.updateLayout({help:!1,settings:!1})});const Yt=()=>{const t=i=>{const n=i.substring(0,20).toLowerCase().split("");for(let r=n.length-1;r>=0;r--)"abcdefghijklmnopqrstuvwxyz0123456789".includes(n[r])||n.splice(r,1);n.length>=5&&u.updateSettings({username:n.slice(0,16).join("")})},e=i=>{v.camera.x/=u.settings.resolution,v.camera.y/=u.settings.resolution,u.updateSettings({resolution:i}),v.camera.x*=u.settings.resolution,v.camera.y*=u.settings.resolution,v.resize()};return d("div",{class:"shadow",style:{display:u.layout.settings?"block":"none",border:"0.05rem solid ",borderRadius:"0.5rem",marginBottom:"var(--spacing-medium)",overflow:"hidden"},children:[d("h3",{class:u.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{padding:"var(--spacing-medium)"},children:"Settings"}),d("div",{class:u.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",children:[d("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),d("div",{style:{padding:"var(--spacing-medium)"},children:[d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Username:"}),d("input",{value:u.settings.username,onChange:i=>t(i.target.value)})]}),d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"FPS:"}),d("input",{type:"range",step:"10",min:"0",max:"120",value:u.settings.fps,onInput:i=>u.updateSettings({fps:parseInt(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),d("p",{children:u.settings.fps===0?"(VSync)":`(${u.settings.fps})`})]}),d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Resolution:"}),d("input",{type:"range",step:"0.1",min:"0.5",max:"2",value:u.settings.resolution,onInput:i=>e(parseFloat(i.target.value)),style:{marginRight:"var(--spacing-small)"}}),d("p",{children:u.settings.resolution===window.devicePixelRatio?"(Native)":`(${u.settings.resolution}x)`})]}),d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Preload Image:"}),d("input",{type:"range",step:"1",min:"0",max:"10",value:u.settings.preload,onInput:i=>u.updateSettings({preload:parseInt(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),d("p",{children:u.settings.preload===5?"(Default)":`(${u.settings.preload})`})]}),d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Move Speed:"}),d("input",{type:"range",step:"0.1",min:"0.5",max:"1.5",value:u.settings.moveSpeed,onInput:i=>u.updateSettings({moveSpeed:parseFloat(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),d("p",{children:u.settings.moveSpeed===1?"(Default)":`(${u.settings.moveSpeed}x)`})]}),d("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Scale Speed:"}),d("input",{type:"range",step:"0.1",min:"0.5",max:"1.5",value:u.settings.scaleSpeed,onInput:i=>u.updateSettings({scaleSpeed:parseFloat(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),d("p",{children:u.settings.scaleSpeed===1?"(Default)":`(${u.settings.scaleSpeed}x)`})]}),d("div",{style:{display:"flex",alignItems:"center"},children:[d("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Reduce Transparency:"}),d("input",{type:"checkbox",checked:u.settings.reduceTransparency,onChange:i=>u.updateSettings({reduceTransparency:i.target.checked})})]})]})]})]})},Bt=()=>{const t=e=>{u.updateSource({value:e,display:e}),g.next()};return d("nav",{class:u.settings.reduceTransparency?"container-solid-light shadow":"container-glassy-light shadow",style:{position:"fixed",display:"flex",alignItems:"center",left:"0rem",top:"0rem",width:"100%",height:"3.5rem"},children:[d("h1",{style:{textWrap:"nowrap",marginLeft:"var(--spacing-medium)",marginRight:"var(--spacing-medium)"},children:"Dataset Editor"}),d("button",{onClick:()=>u.updateLayout({help:!u.layout.help}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Help"}),d("button",{onClick:()=>u.updateLayout({settings:!u.layout.settings}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Settings"}),d("button",{onClick:()=>u.updateLayout({tasks:!u.layout.tasks}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Tasks"}),d("div",{style:"flex: 1"}),d("select",{onChange:e=>u.updateSource({driver:e.target.value}),style:{marginRight:"var(--spacing-small)"},children:Object.keys(g.drivers).map(e=>d("option",{value:g.drivers[e].id,selected:e===u.source.driver?!0:void 0,children:g.drivers[e].name}))}),d("input",{value:u.source.display,autocomplete:"off",onChange:e=>t(e.target.value),style:{width:"7.5rem",marginRight:"var(--spacing-small)"}}),d("button",{style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Entries"})]})},qt=()=>d("div",{class:"shadow",style:{display:u.layout.tasks?"block":"none",border:"0.05rem solid ",borderRadius:"0.5rem",marginBottom:"var(--spacing-medium)",overflow:"hidden"},children:[d("h3",{class:u.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{padding:"var(--spacing-medium)"},children:"Tasks"}),d("div",{class:u.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",children:[d("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),d("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-small)",padding:"var(--spacing-medium)",overflowX:"auto"},children:u.taskList.length>0?u.taskList.map(t=>{const e=u.taskMap[t];return d("div",{style:{display:"flex",alignItems:"center"},children:[d("h5",{style:{color:`var(--color-${e.type})`,textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:e.title}),d("p",{style:{textWrap:"nowrap"},children:e.message})]})}):d("p",{style:{opacity:.25},children:"No Active Task"})})]})]});Le(d(Bt,{}),document.getElementById("container-navbar"));Le(d(Yt,{}),document.getElementById("container-settings"));Le(d(qt,{}),document.getElementById("container-tasks"));let ye=performance.now();function Te(){const t=performance.now()-ye;ye=performance.now(),h.update(t),v.update(t),u.settings.fps===0?requestAnimationFrame(Te):setTimeout(Te,1e3/u.settings.fps-(performance.now()-ye))}let I=null;async function ae(t){try{const e=await g.drivers[u.source.driver].preload(u.settings.preload);e===null?(I!==null&&(I=u.removeTask(I)),setTimeout(()=>ae(1),100)):(I=I===null?u.addTask("success","Preload",`${e.amount} (${e.id}/${e.page})`):u.updateTask(I,{type:"success",message:`${e.amount} (${e.id}/${e.page})`}),await fetch(e.url),setTimeout(()=>ae(1),50))}catch(e){t<4?(I=I===null?u.addTask("warning","Preload",`${t} (${e.message})`):u.updateTask(I,{type:"warning",message:`${t} (${e.message})`}),setTimeout(()=>ae(t+1),1e3)):I=I===null?u.addTask("error","Preload",e.message):u.updateTask(I,{type:"error",message:e.message})}}window.addEventListener("load",()=>{Te(),ae(1),g.next()});
