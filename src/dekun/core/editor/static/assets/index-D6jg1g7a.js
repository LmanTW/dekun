(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var ct,x,Ft,Bt,R,Ct,qt,Vt,Gt,St,vt,gt,V={},Jt=[],ye=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ut=Array.isArray;function L(e,t){for(var i in t)e[i]=t[i];return e}function $t(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xe(e,t,i){var s,r,n,a={};for(n in t)n=="key"?s=t[n]:n=="ref"?r=t[n]:a[n]=t[n];if(arguments.length>2&&(a.children=arguments.length>3?ct.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(n in e.defaultProps)a[n]===void 0&&(a[n]=e.defaultProps[n]);return it(e,a,s,r,null)}function it(e,t,i,s,r){var n={type:e,props:t,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ft,__i:-1,__u:0};return r==null&&x.vnode!=null&&x.vnode(n),n}function G(e){return e.children}function B(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?U(e):null}function Zt(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Zt(e)}}function Lt(e){(!e.__d&&(e.__d=!0)&&R.push(e)&&!nt.__r++||Ct!=x.debounceRendering)&&((Ct=x.debounceRendering)||qt)(nt)}function nt(){for(var e,t,i,s,r,n,a,c=1;R.length;)R.length>c&&R.sort(Vt),e=R.shift(),c=R.length,e.__d&&(i=void 0,s=void 0,r=(s=(t=e).__v).__e,n=[],a=[],t.__P&&((i=L({},s)).__v=s.__v+1,x.vnode&&x.vnode(i),Tt(t.__P,i,s,t.__n,t.__P.namespaceURI,32&s.__u?[r]:null,n,r??U(s),!!(32&s.__u),a),i.__v=s.__v,i.__.__k[i.__i]=i,te(n,i,a),s.__e=s.__=null,i.__e!=r&&Zt(i)));nt.__r=0}function Kt(e,t,i,s,r,n,a,c,_,l,f){var o,g,d,S,E,P,w,k=s&&s.__k||Jt,O=t.length;for(_=we(i,t,k,_,O),o=0;o<O;o++)(d=i.__k[o])!=null&&(g=d.__i==-1?V:k[d.__i]||V,d.__i=o,P=Tt(e,d,g,r,n,a,c,_,l,f),S=d.__e,d.ref&&g.ref!=d.ref&&(g.ref&&Pt(g.ref,null,d),f.push(d.ref,d.__c||S,d)),E==null&&S!=null&&(E=S),(w=!!(4&d.__u))||g.__k===d.__k?_=Qt(d,_,e,w):typeof d.type=="function"&&P!==void 0?_=P:S&&(_=S.nextSibling),d.__u&=-7);return i.__e=E,_}function we(e,t,i,s,r){var n,a,c,_,l,f=i.length,o=f,g=0;for(e.__k=new Array(r),n=0;n<r;n++)(a=t[n])!=null&&typeof a!="boolean"&&typeof a!="function"?(_=n+g,(a=e.__k[n]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?it(null,a,null,null,null):ut(a)?it(G,{children:a},null,null,null):a.constructor==null&&a.__b>0?it(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,c=null,(l=a.__i=ke(a,i,_,o))!=-1&&(o--,(c=i[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(r>f?g--:r<f&&g++),typeof a.type!="function"&&(a.__u|=4)):l!=_&&(l==_-1?g--:l==_+1?g++:(l>_?g--:g++,a.__u|=4))):e.__k[n]=null;if(o)for(n=0;n<f;n++)(c=i[n])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=U(c)),ie(c,c));return s}function Qt(e,t,i,s){var r,n;if(typeof e.type=="function"){for(r=e.__k,n=0;r&&n<r.length;n++)r[n]&&(r[n].__=e,t=Qt(r[n],t,i,s));return t}e.__e!=t&&(s&&(t&&e.type&&!t.parentNode&&(t=U(e)),i.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ke(e,t,i,s){var r,n,a,c=e.key,_=e.type,l=t[i],f=l!=null&&(2&l.__u)==0;if(l===null&&e.key==null||f&&c==l.key&&_==l.type)return i;if(s>(f?1:0)){for(r=i-1,n=i+1;r>=0||n<t.length;)if((l=t[a=r>=0?r--:n++])!=null&&(2&l.__u)==0&&c==l.key&&_==l.type)return a}return-1}function Ot(e,t,i){t[0]=="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||ye.test(t)?i:i+"px"}function tt(e,t,i,s,r){var n,a;t:if(t=="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)i&&t in i||Ot(e.style,t,"");if(i)for(t in i)s&&i[t]==s[t]||Ot(e.style,t,i[t])}else if(t[0]=="o"&&t[1]=="n")n=t!=(t=t.replace(Gt,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+n]=i,i?s?i.u=s.u:(i.u=St,e.addEventListener(t,n?gt:vt,n)):e.removeEventListener(t,n?gt:vt,n);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&i==1?"":i))}}function Mt(e){return function(t){if(this.l){var i=this.l[t.type+e];if(t.t==null)t.t=St++;else if(t.t<i.u)return;return i(x.event?x.event(t):t)}}}function Tt(e,t,i,s,r,n,a,c,_,l){var f,o,g,d,S,E,P,w,k,O,M,K,H,Et,Q,j,_t,C=t.type;if(t.constructor!=null)return null;128&i.__u&&(_=!!(32&i.__u),n=[c=t.__e=i.__e]),(f=x.__b)&&f(t);t:if(typeof C=="function")try{if(w=t.props,k="prototype"in C&&C.prototype.render,O=(f=C.contextType)&&s[f.__c],M=f?O?O.props.value:f.__:s,i.__c?P=(o=t.__c=i.__c).__=o.__E:(k?t.__c=o=new C(w,M):(t.__c=o=new B(w,M),o.constructor=C,o.render=Se),O&&O.sub(o),o.props=w,o.state||(o.state={}),o.context=M,o.__n=s,g=o.__d=!0,o.__h=[],o._sb=[]),k&&o.__s==null&&(o.__s=o.state),k&&C.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=L({},o.__s)),L(o.__s,C.getDerivedStateFromProps(w,o.__s))),d=o.props,S=o.state,o.__v=t,g)k&&C.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),k&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(k&&C.getDerivedStateFromProps==null&&w!==d&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(w,M),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(w,o.__s,M)===!1||t.__v==i.__v){for(t.__v!=i.__v&&(o.props=w,o.state=o.__s,o.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),K=0;K<o._sb.length;K++)o.__h.push(o._sb[K]);o._sb=[],o.__h.length&&a.push(o);break t}o.componentWillUpdate!=null&&o.componentWillUpdate(w,o.__s,M),k&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(d,S,E)})}if(o.context=M,o.props=w,o.__P=e,o.__e=!1,H=x.__r,Et=0,k){for(o.state=o.__s,o.__d=!1,H&&H(t),f=o.render(o.props,o.state,o.context),Q=0;Q<o._sb.length;Q++)o.__h.push(o._sb[Q]);o._sb=[]}else do o.__d=!1,H&&H(t),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++Et<25);o.state=o.__s,o.getChildContext!=null&&(s=L(L({},s),o.getChildContext())),k&&!g&&o.getSnapshotBeforeUpdate!=null&&(E=o.getSnapshotBeforeUpdate(d,S)),j=f,f!=null&&f.type===G&&f.key==null&&(j=ee(f.props.children)),c=Kt(e,ut(j)?j:[j],t,i,s,r,n,a,c,_,l),o.base=t.__e,t.__u&=-161,o.__h.length&&a.push(o),P&&(o.__E=o.__=null)}catch(Y){if(t.__v=null,_||n!=null)if(Y.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;n[n.indexOf(c)]=null,t.__e=c}else{for(_t=n.length;_t--;)$t(n[_t]);yt(t)}else t.__e=i.__e,t.__k=i.__k,Y.then||yt(t);x.__e(Y,t,i)}else n==null&&t.__v==i.__v?(t.__k=i.__k,t.__e=i.__e):c=t.__e=be(i.__e,t,i,s,r,n,a,_,l);return(f=x.diffed)&&f(t),128&t.__u?void 0:c}function yt(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(yt)}function te(e,t,i){for(var s=0;s<i.length;s++)Pt(i[s],i[++s],i[++s]);x.__c&&x.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){x.__e(n,r.__v)}})}function ee(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ut(e)?e.map(ee):L({},e)}function be(e,t,i,s,r,n,a,c,_){var l,f,o,g,d,S,E,P=i.props,w=t.props,k=t.type;if(k=="svg"?r="http://www.w3.org/2000/svg":k=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),n!=null){for(l=0;l<n.length;l++)if((d=n[l])&&"setAttribute"in d==!!k&&(k?d.localName==k:d.nodeType==3)){e=d,n[l]=null;break}}if(e==null){if(k==null)return document.createTextNode(w);e=document.createElementNS(r,k,w.is&&w),c&&(x.__m&&x.__m(t,n),c=!1),n=null}if(k==null)P===w||c&&e.data==w||(e.data=w);else{if(n=n&&ct.call(e.childNodes),P=i.props||V,!c&&n!=null)for(P={},l=0;l<e.attributes.length;l++)P[(d=e.attributes[l]).name]=d.value;for(l in P)if(d=P[l],l!="children"){if(l=="dangerouslySetInnerHTML")o=d;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;tt(e,l,null,d,r)}}for(l in w)d=w[l],l=="children"?g=d:l=="dangerouslySetInnerHTML"?f=d:l=="value"?S=d:l=="checked"?E=d:c&&typeof d!="function"||P[l]===d||tt(e,l,d,P[l],r);if(f)c||o&&(f.__html==o.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(o&&(e.innerHTML=""),Kt(t.type=="template"?e.content:e,ut(g)?g:[g],t,i,s,k=="foreignObject"?"http://www.w3.org/1999/xhtml":r,n,a,n?n[0]:i.__k&&U(i,0),c,_),n!=null)for(l=n.length;l--;)$t(n[l]);c||(l="value",k=="progress"&&S==null?e.removeAttribute("value"):S!=null&&(S!==e[l]||k=="progress"&&!S||k=="option"&&S!=P[l])&&tt(e,l,S,P[l],r),l="checked",E!=null&&E!=e[l]&&tt(e,l,E,P[l],r))}return e}function Pt(e,t,i){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(r){x.__e(r,i)}}function ie(e,t,i){var s,r;if(x.unmount&&x.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||Pt(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(n){x.__e(n,t)}s.base=s.__P=null}if(s=e.__k)for(r=0;r<s.length;r++)s[r]&&ie(s[r],t,i||typeof e.type!="function");i||$t(e.__e),e.__c=e.__=e.__e=void 0}function Se(e,t,i){return this.constructor(e,i)}function se(e,t,i){var s,r,n,a;t==document&&(t=document.documentElement),x.__&&x.__(e,t),r=(s=!1)?null:t.__k,n=[],a=[],Tt(t,e=t.__k=xe(G,null,[e]),r||V,V,t.namespaceURI,r?null:t.firstChild?ct.call(t.childNodes):null,n,r?r.__e:t.firstChild,s,a),te(n,e,a)}ct=Jt.slice,x={__e:function(e,t,i,s){for(var r,n,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,s||{}),a=r.__d),a)return r.__E=r}catch(c){e=c}throw e}},Ft=0,Bt=function(e){return e!=null&&e.constructor==null},B.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=L({},this.state),typeof e=="function"&&(e=e(L({},i),this.props)),e&&L(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),Lt(this))},B.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Lt(this))},B.prototype.render=G,R=[],qt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vt=function(e,t){return e.__v.__b-t.__v.__b},nt.__r=0,Gt=/(PointerCapture)$|Capture$/i,St=0,vt=Mt(!1),gt=Mt(!0);var $e=0;function v(e,t,i,s,r,n){t||(t={});var a,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?a=t[c]:_[c]=t[c];var l={type:e,props:_,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$e,__i:-1,__u:0,__source:r,__self:n};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)_[c]===void 0&&(_[c]=a[c]);return x.vnode&&x.vnode(l),l}var rt,$,dt,Nt,xt=0,ne=[],T=x,Rt=T.__b,At=T.__r,Yt=T.diffed,Xt=T.__c,Ut=T.unmount,zt=T.__;function re(e,t){T.__h&&T.__h($,e,xt||t),xt=0;var i=$.__H||($.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function Te(e){return xt=1,Pe(ae,e)}function Pe(e,t,i){var s=re(rt++,2);if(s.t=e,!s.__c&&(s.__=[ae(void 0,t),function(c){var _=s.__N?s.__N[0]:s.__[0],l=s.t(_,c);_!==l&&(s.__N=[l,s.__[1]],s.__c.setState({}))}],s.__c=$,!$.__f)){var r=function(c,_,l){if(!s.__c.__H)return!0;var f=s.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!n||n.call(this,c,_,l);var o=s.__c.props!==c;return f.forEach(function(g){if(g.__N){var d=g.__[0];g.__=g.__N,g.__N=void 0,d!==g.__[0]&&(o=!0)}}),n&&n.call(this,c,_,l)||o};$.__f=!0;var n=$.shouldComponentUpdate,a=$.componentWillUpdate;$.componentWillUpdate=function(c,_,l){if(this.__e){var f=n;n=void 0,r(c,_,l),n=f}a&&a.call(this,c,_,l)},$.shouldComponentUpdate=r}return s.__N||s.__}function Ie(e,t){var i=re(rt++,7);return Le(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function Ee(){for(var e;e=ne.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(st),e.__H.__h.forEach(wt),e.__H.__h=[]}catch(t){e.__H.__h=[],T.__e(t,e.__v)}}T.__b=function(e){$=null,Rt&&Rt(e)},T.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),zt&&zt(e,t)},T.__r=function(e){At&&At(e),rt=0;var t=($=e.__c).__H;t&&(dt===$?(t.__h=[],$.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(t.__h.forEach(st),t.__h.forEach(wt),t.__h=[],rt=0)),dt=$},T.diffed=function(e){Yt&&Yt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ne.push(t)!==1&&Nt===T.requestAnimationFrame||((Nt=T.requestAnimationFrame)||Ce)(Ee)),t.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),dt=$=null},T.__c=function(e,t){t.some(function(i){try{i.__h.forEach(st),i.__h=i.__h.filter(function(s){return!s.__||wt(s)})}catch(s){t.some(function(r){r.__h&&(r.__h=[])}),t=[],T.__e(s,i.__v)}}),Xt&&Xt(e,t)},T.unmount=function(e){Ut&&Ut(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(s){try{st(s)}catch(r){t=r}}),i.__H=void 0,t&&T.__e(t,i.__v))};var Dt=typeof requestAnimationFrame=="function";function Ce(e){var t,i=function(){clearTimeout(s),Dt&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(i,35);Dt&&(t=requestAnimationFrame(i))}function st(e){var t=$,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),$=t}function wt(e){var t=$;e.__c=e.__(),$=t}function Le(e,t){return!e||e.length!==t.length||t.some(function(i,s){return i!==e[s]})}function ae(e,t){return typeof t=="function"?t(e):t}var Oe=Symbol.for("preact-signals");function ht(){if(N>1)N--;else{for(var e,t=!1;q!==void 0;){var i=q;for(q=void 0,kt++;i!==void 0;){var s=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&ce(i))try{i.c()}catch(r){t||(e=r,t=!0)}i=s}}if(kt=0,N--,t)throw e}}function Me(e){if(N>0)return e();N++;try{return e()}finally{ht()}}var y=void 0;function oe(e){var t=y;y=void 0;try{return e()}finally{y=t}}var q=void 0,N=0,kt=0,at=0;function le(e){if(y!==void 0){var t=e.n;if(t===void 0||t.t!==y)return t={i:0,S:e,p:y.s,n:void 0,t:y,e:void 0,x:void 0,r:t},y.s!==void 0&&(y.s.n=t),y.s=t,e.n=t,32&y.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=y.s,t.n=void 0,y.s.n=t,y.s=t),t}}function I(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}I.prototype.brand=Oe;I.prototype.h=function(){return!0};I.prototype.S=function(e){var t=this,i=this.t;i!==e&&e.e===void 0&&(e.x=i,this.t=e,i!==void 0?i.e=e:oe(function(){var s;(s=t.W)==null||s.call(t)}))};I.prototype.U=function(e){var t=this;if(this.t!==void 0){var i=e.e,s=e.x;i!==void 0&&(i.x=s,e.e=void 0),s!==void 0&&(s.e=i,e.x=void 0),e===this.t&&(this.t=s,s===void 0&&oe(function(){var r;(r=t.Z)==null||r.call(t)}))}};I.prototype.subscribe=function(e){var t=this;return Z(function(){var i=t.value,s=y;y=void 0;try{e(i)}finally{y=s}},{name:"sub"})};I.prototype.valueOf=function(){return this.value};I.prototype.toString=function(){return this.value+""};I.prototype.toJSON=function(){return this.value};I.prototype.peek=function(){var e=y;y=void 0;try{return this.value}finally{y=e}};Object.defineProperty(I.prototype,"value",{get:function(){var e=le(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(kt>100)throw new Error("Cycle detected");this.v=e,this.i++,at++,N++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{ht()}}}});function J(e,t){return new I(e,t)}function ce(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function ue(e){for(var t=e.s;t!==void 0;t=t.n){var i=t.S.n;if(i!==void 0&&(t.r=i),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function he(e){for(var t=e.s,i=void 0;t!==void 0;){var s=t.p;t.i===-1?(t.S.U(t),s!==void 0&&(s.n=t.n),t.n!==void 0&&(t.n.p=s)):i=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=s}e.s=i}function A(e,t){I.call(this,void 0),this.x=e,this.s=void 0,this.g=at-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}A.prototype=new I;A.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===at))return!0;if(this.g=at,this.f|=1,this.i>0&&!ce(this))return this.f&=-2,!0;var e=y;try{ue(this),y=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return y=e,he(this),this.f&=-2,!0};A.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}I.prototype.S.call(this,e)};A.prototype.U=function(e){if(this.t!==void 0&&(I.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};A.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(A.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=le(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Ht(e,t){return new A(e,t)}function _e(e){var t=e.u;if(e.u=void 0,typeof t=="function"){N++;var i=y;y=void 0;try{t()}catch(s){throw e.f&=-2,e.f|=8,It(e),s}finally{y=i,ht()}}}function It(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,_e(e)}function Ne(e){if(y!==this)throw new Error("Out-of-order effect");he(this),y=e,this.f&=-2,8&this.f&&It(this),ht()}function z(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}z.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};z.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,_e(this),ue(this),N++;var e=y;return y=this,Ne.bind(this,e)};z.prototype.N=function(){2&this.f||(this.f|=2,this.o=q,q=this)};z.prototype.d=function(){this.f|=8,1&this.f||It(this)};z.prototype.dispose=function(){this.d()};function Z(e,t){var i=new z(e,t);try{i.c()}catch(r){throw i.d(),r}var s=i.d.bind(i);return s[Symbol.dispose]=s,s}var de,ft,fe=[];Z(function(){de=this.N})();function D(e,t){x[e]=t.bind(null,x[e]||function(){})}function ot(e){ft&&ft(),ft=e&&e.S()}function pe(e){var t=this,i=e.data,s=Ae(i);s.value=i;var r=Ie(function(){for(var c=t,_=t.__v;_=_.__;)if(_.__c){_.__c.__$f|=4;break}var l=Ht(function(){var d=s.value.value;return d===0?0:d===!0?"":d||""}),f=Ht(function(){return!Array.isArray(l.value)&&!Bt(l.value)}),o=Z(function(){if(this.N=me,f.value){var d=l.value;c.__v&&c.__v.__e&&c.__v.__e.nodeType===3&&(c.__v.__e.data=d)}}),g=t.__$u.d;return t.__$u.d=function(){o(),g.call(this)},[f,l]},[]),n=r[0],a=r[1];return n.value?a.peek():a.value}pe.displayName="ReactiveTextNode";Object.defineProperties(I.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:pe},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});D("__b",function(e,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var i,s=t.props;for(var r in s)if(r!=="children"){var n=s[r];n instanceof I&&(i||(t.__np=i={}),i[r]=n,s[r]=n.peek())}}e(t)});D("__r",function(e,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t.type.displayName||t.type.name||"Unknown"),t.type!==G){ot();var i,s=t.__c;s&&(s.__$f&=-2,(i=s.__$u)===void 0&&(s.__$u=i=(function(r){var n;return Z(function(){n=this}),n.c=function(){s.__$f|=1,s.setState({})},n})())),ot(i)}e(t)});D("__e",function(e,t,i,s){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ot(),e(t,i,s)});D("diffed",function(e,t){typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ot();var i;if(typeof t.type=="string"&&(i=t.__e)){var s=t.__np,r=t.props;if(s){var n=i.U;if(n)for(var a in n){var c=n[a];c!==void 0&&!(a in s)&&(c.d(),n[a]=void 0)}else n={},i.U=n;for(var _ in s){var l=n[_],f=s[_];l===void 0?(l=Re(i,_,f,r),n[_]=l):l.o(f,r)}}}e(t)});function Re(e,t,i,s){var r=t in e&&e.ownerSVGElement===void 0,n=J(i);return{o:function(a,c){n.value=a,s=c},d:Z(function(){this.N=me;var a=n.value.value;s[t]!==a&&(s[t]=a,r?e[t]=a:a?e.setAttribute(t,a):e.removeAttribute(t))})}}D("unmount",function(e,t){if(typeof t.type=="string"){var i=t.__e;if(i){var s=i.U;if(s){i.U=void 0;for(var r in s){var n=s[r];n&&n.d()}}}}else{var a=t.__c;if(a){var c=a.__$u;c&&(a.__$u=void 0,c.d())}}e(t)});D("__h",function(e,t,i,s){(s<3||s===9)&&(t.__$f|=2),e(t,i,s)});B.prototype.shouldComponentUpdate=function(e,t){var i=this.__$u,s=i&&i.s!==void 0;for(var r in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var n=2&this.__$f;if(!(s||n||4&this.__$f)||1&this.__$f)return!0}else if(!(s||4&this.__$f)||3&this.__$f)return!0;for(var a in e)if(a!=="__source"&&e[a]!==this.props[a])return!0;for(var c in this.props)if(!(c in e))return!0;return!1};function Ae(e,t){return Te(function(){return J(e,t)})[0]}var Ye=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Xe(){Me(function(){for(var e;e=fe.shift();)de.call(e)})}function me(){fe.push(this)===1&&(x.requestAnimationFrame||Ye)(Xe)}const Ue={id:"nhentai",name:"nHentai"},ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));let b=null;const X=[];async function jt(){const e=(await(await fetch("/api/drivers/pixiv/discovery")).json()).body.illusts,t=e[Math.floor(Math.random()*e.length)],i=(await(await fetch(`/api/drivers/pixiv/pages/${t.id}`)).json()).body,s=Math.floor(Math.random()*t.pageCount),r=i[s].urls.original.split("/");return{id:`${t.id}`,page:s+1,url:`/resource/pixiv/${r.slice(5,11).join("-")}/${r[11]}`,source:`${t.id}/${s+1}`}}const De={id:"pixiv",name:"Pixiv",async next(e){const t=e.split("/").map(i=>i.trim()).filter(i=>i.length>0);if(t.length>0){if(b===null||t[0]!==b.id)b={id:t[0],pages:(await(await fetch(`/api/drivers/pixiv/pages/${t[0]}`)).json()).body.map(i=>{const s=i.urls.original.split("/");return`/resource/pixiv/${s.slice(5,11).join("-")}/${s[11]}`}),index:t.length>1?parseInt(t[1])-1:0,cacheIndex:t.length>1?parseInt(t[1])-1:0};else{const i=isNaN(parseInt(t[1]))?1:parseInt(t[1])-1;b.index=i===b.index?b.index+1:i}return b.index>=b.pages.length?(b=null,await this.next("")):{id:b.id,page:b.index+1,url:b.pages[b.index],source:`${b.id}/${b.index+1}`}}return X.length>0?Object.assign(X.splice(0,1)[0],{source:""}):Object.assign(await jt(),{source:""})},preload:async e=>{if(b===null){if(X.length<e){const t=X[X.push(await jt())-1];return{id:t.id,page:t.page,url:t.url,amount:X.length}}}else if(b.cacheIndex<Math.min(b.index+e,b.pages.length))return b.cacheIndex++,{id:b.id,page:b.cacheIndex,url:b.pages[b.cacheIndex-1],amount:b.cacheIndex-b.index};return null}},He=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"})),Wt=Object.assign({"./drivers/nhentai.ts":ze,"./drivers/pixiv.ts":He});class p{static canvas=document.createElement("canvas");static ctx=this.canvas.getContext("2d");static submitCanvas=document.createElement("canvas");static submitCtx=this.submitCanvas.getContext("2d");static drivers={pixiv:Wt["./drivers/pixiv.ts"].default,nhentai:Wt["./drivers/nhentai.ts"].default};static data=null;static timestamp=0;static async next(t){const i=this.data,s=performance.now();this.data=null,this.timestamp=performance.now();try{const r=h.source.driver,n=await this.drivers[h.source.driver].next(t===void 0?h.source.value:t);if(n===null)this.data=i;else{h.updateSource({value:n.source,display:`${n.id}/${n.page}`});const a=document.createElement("img");a.src=n.url,a.addEventListener("load",()=>{this.timestamp===s&&(this.data={provider:r,id:n.id,page:n.page,element:a,transform:this.calculateTransform(a.width,a.height),strokes:[]},this.canvas.width=a.width,this.canvas.height=a.height)})}}catch{this.data=i}}static async submit(){if(this.data!==null){const t=this.data;this.data=null,m.reset(),u.reset();const i=this.submitCanvas,s=this.submitCtx;i.width=t.element.width,i.height=t.element.height,s.drawImage(t.element,0,0,i.width,i.height);const r=i.toDataURL("image/jpeg",1).substring(23);s.clearRect(0,0,i.width,i.height),s.fillStyle="white",s.strokeStyle="white";for(const a of t.strokes)if(a.type===1||a.type===2)s.lineCap=a.type===1?"butt":"round",s.lineWidth=(t.element.width+t.element.height)*(a.size*.0025),s.moveTo(a.x1,a.y1),s.lineTo(a.x2,a.y2),s.stroke(),s.beginPath();else if(a.type===3){for(const[c,_]of a.points.entries())c===0?s.moveTo(_.x,_.y):s.lineTo(_.x,_.y);s.lineTo(a.points[0].x,a.points[0].y),s.fill(),s.beginPath()}const n=i.toDataURL("image/png",1).substring(22);try{await fetch("/api/submit",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t.provider,id:t.id,page:t.page,image:r,mask:n,author:h.settings.username})}),await this.next()}catch{this.data=t}}}static update(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,this.data!==null){this.ctx.fillStyle=`rgba(0,255,0,${u.strokeOpacity})`,this.ctx.strokeStyle=`rgba(0,255,0,${u.strokeOpacity})`;for(const t of this.data.strokes)if(t.type===1||t.type===2)this.ctx.lineCap=t.type===1?"butt":"round",this.ctx.lineWidth=(this.data.element.width+this.data.element.height)*(t.size*.0025),this.ctx.moveTo(t.x1,t.y1),this.ctx.lineTo(t.x2,t.y2),this.ctx.stroke(),this.ctx.beginPath();else if(t.type===3){for(const[i,s]of t.points.entries())i===0?this.ctx.moveTo(s.x,s.y):this.ctx.lineTo(s.x,s.y);this.ctx.lineTo(t.points[0].x,t.points[0].y),this.ctx.fill(),this.ctx.beginPath()}if(this.ctx.fillStyle="rgba(0,255,0,0.5)",this.ctx.strokeStyle="rgba(0,255,0,0.5)",u.strokeType===1||u.strokeType===2)u.startX!==null&&u.startY!==null&&(this.ctx.lineCap=u.strokeType===1?"butt":"round",this.ctx.lineWidth=(this.data.element.width+this.data.element.height)*(u.strokeSize*.0025),this.ctx.moveTo(u.startX,u.startY),this.ctx.lineTo(u.mouse.imageX,u.mouse.imageY),this.ctx.stroke(),this.ctx.beginPath());else if(u.strokeType===3){for(const[t,i]of u.strokePoints.entries())t===0?this.ctx.moveTo(i.x,i.y):this.ctx.lineTo(i.x,i.y);u.strokePoints.length>2&&this.ctx.lineTo(u.strokePoints[0].x,u.strokePoints[0].y),this.ctx.fill(),this.ctx.beginPath()}}}static async preload(){return await p.drivers[h.source.driver].preload(h.settings.preload)}static updateTransform(){this.data!==null&&(this.data.transform=this.calculateTransform(this.data.element.width,this.data.element.height))}static calculateTransform(t,i){const s=m.canvas.width/m.canvas.height,r=t/i;let n,a;r>s?(n=m.canvas.width,a=m.canvas.width/r):(n=m.canvas.height*r,a=m.canvas.height);const c=3.5*parseFloat(getComputedStyle(document.documentElement).fontSize)*h.settings.resolution;return n*=.9,a*=.9,a-=c/2,{x:(m.canvas.width-n)/2,y:(m.canvas.height+c-a)/2,width:n,height:a,widthScale:n/t,heightScale:a/i}}}function ve(e,t){return localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):t}const et=J({help:!1,settings:!1,tasks:!1,entries:!1}),W=J(ve("settings",{username:"unknown",fps:0,resolution:window.devicePixelRatio,preload:5,moveSpeed:1,scaleSpeed:1,reduceTransparency:!1})),F=J(ve("source",{driver:Object.keys(p.drivers)[0],value:"",display:""}));class h{static get layout(){return et.value}static get settings(){return W.value}static get source(){return F.value}static get layoutSignal(){return et}static get settingsSignal(){return W}static get sourceSignal(){return F}static updateLayout(t){et.value={...et.value,...t}}static updateSettings(t){W.value={...W.value,...t},localStorage.setItem("settings",JSON.stringify(W.value))}static updateSource(t){F.value={...F.value,...t},localStorage.setItem("source",JSON.stringify(F.value))}}class u{static mouse={button:{left:0,right:0},editorX:0,editorY:0,imageX:0,imageY:0,oldImageX:0,oldImageY:0};static keyboard=new Map;static strokeType=1;static strokeSize=2;static strokePoints=[];static startX=null;static startY=null;static moveIndex=null;static strokeOpacity=1;static saveConfirm=0;static reset(){this.strokePoints=[],this.startX=null,this.startY=null,this.moveIndex=null}static update(t){if(p.data!==null)if(u.mouse.oldImageX=this.mouse.imageX,u.mouse.oldImageY=this.mouse.imageY,u.mouse.imageX=(this.mouse.editorX/m.camera.scale+(m.camera.x-p.data.transform.x))/p.data.transform.widthScale,u.mouse.imageY=(this.mouse.editorY/m.camera.scale+(m.camera.y-p.data.transform.y))/p.data.transform.heightScale,this.mouse.button.left===1){if(this.strokeType==1||this.strokeType===2)this.startX=this.mouse.imageX,this.startY=this.mouse.imageY;else if(this.strokeType===3){for(let i=0;i<this.strokePoints.length;i++){const s=(p.data.transform.x+u.strokePoints[i].x*p.data.transform.widthScale-m.camera.x)*m.camera.scale,r=(p.data.transform.y+u.strokePoints[i].y*p.data.transform.heightScale-m.camera.y)*m.camera.scale;if(Math.hypot(s-this.mouse.editorX,r-this.mouse.editorY)<7.5*h.settings.resolution){this.moveIndex=i;break}}this.moveIndex===null&&this.strokePoints.push({x:this.mouse.imageX,y:this.mouse.imageY})}}else if(this.mouse.button.right===1){if(this.strokeType===1||this.strokeType===2){const i=p.data.strokes[p.data.strokes.length-1];i!==void 0&&i.type===this.strokeType&&(this.startX=i.x2,this.startY=i.y2)}else if(this.strokeType===3)if(this.strokePoints.length===0){const i=p.data.strokes[p.data.strokes.length-1];i!==void 0&&i.type===3&&(this.strokePoints=i.points,p.data.strokes.splice(p.data.strokes.length-1,1))}else this.strokePoints.length>2&&p.data.strokes.push({type:3,points:this.strokePoints}),this.strokePoints=[]}else this.mouse.button.left===2?this.moveIndex!==null&&(this.strokePoints[this.moveIndex]={x:this.mouse.imageX,y:this.mouse.imageY}):(this.mouse.button.left===3||this.mouse.button.right===3)&&((this.strokeType===1||this.strokeType===2)&&this.startX!==null&&this.startY!==null?(p.data.strokes.push({type:this.strokeType,size:this.strokeSize,x1:this.startX,y1:this.startY,x2:this.mouse.imageX,y2:this.mouse.imageY}),this.startX=null,this.startY=null):this.strokeType===3&&(this.moveIndex=null));this.keyboard.get("1")===1?(this.strokeType=1,this.strokePoints=[]):this.keyboard.get("2")===1?(this.strokeType=2,this.strokePoints=[]):this.keyboard.get("3")===1&&(this.strokeType=3,this.startX=null,this.startY=null),this.keyboard.get("-")?(u.strokeSize-=1,u.strokeSize=Math.min(100/m.camera.scale,Math.max(.5/m.camera.scale,u.strokeSize))):this.keyboard.get("+")&&(u.strokeSize+=1,u.strokeSize=Math.min(100/m.camera.scale,Math.max(.5/m.camera.scale,u.strokeSize))),this.keyboard.has("a")?m.camera.xSpeed=-3*h.settings.moveSpeed:this.keyboard.has("d")&&(m.camera.xSpeed=3*h.settings.moveSpeed),this.keyboard.has("w")?m.camera.ySpeed=-3*h.settings.moveSpeed:this.keyboard.has("s")&&(m.camera.ySpeed=3*h.settings.moveSpeed),this.keyboard.has("q")?m.camera.scaleSpeed=-.005*h.settings.scaleSpeed:this.keyboard.has("e")&&(m.camera.scaleSpeed=.005*h.settings.scaleSpeed),this.keyboard.get("r")===1?m.reset():this.keyboard.get("f")===1&&(this.strokeOpacity-=.5,this.strokeOpacity<0&&(this.strokeOpacity=1)),this.keyboard.get("z")===1?p.next():this.keyboard.get("x")===1&&(this.strokePoints.length>0?this.strokePoints.splice(this.strokePoints.length-1):p.data!==null&&p.data.strokes.length>0&&p.data.strokes.splice(p.data.strokes.length-1)),p.data!==null&&(this.keyboard.has("c")?(this.saveConfirm+=.003*t,this.saveConfirm>1&&(p.submit(),this.saveConfirm=0)):this.saveConfirm=0),this.mouse.button.left===1?this.mouse.button.left=2:this.mouse.button.left===3&&(this.mouse.button.left=0),this.mouse.button.right===1?this.mouse.button.right=2:this.mouse.button.right===3&&(this.mouse.button.right=0),this.keyboard.forEach((i,s)=>{this.keyboard.set(s,2)})}}window.addEventListener("mousedown",e=>{e.button===0?u.mouse.button.left=1:e.button===2&&(u.mouse.button.right=1)});window.addEventListener("mouseup",e=>{e.button===0?u.mouse.button.left=3:e.button===2&&(u.mouse.button.right=3)});window.addEventListener("mousemove",e=>{u.mouse.editorX=e.x*h.settings.resolution,u.mouse.editorY=e.y*h.settings.resolution});window.addEventListener("wheel",e=>{e.target===m.canvas&&(u.strokeSize+=-e.deltaY/(10*m.camera.scale),u.strokeSize=Math.min(100/m.camera.scale,Math.max(.5/m.camera.scale,u.strokeSize)))});window.addEventListener("keydown",e=>{e.target===document.body&&(u.keyboard.has(e.key)||u.keyboard.set(e.key,1))});window.addEventListener("keyup",e=>{u.keyboard.delete(e.key)});let pt=0;function je(){if(Math.hypot(u.mouse.imageX-u.mouse.oldImageX,u.mouse.imageY-u.mouse.oldImageY)>.1){let t=Math.atan2(u.mouse.imageY-u.mouse.oldImageY,u.mouse.imageX-u.mouse.oldImageX)-pt;for(;t<-Math.PI;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;pt+=t*.25}return pt}class m{static canvas=document.getElementById("canvas-main");static ctx=this.canvas.getContext("2d");static camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0};static resize(){const t=this.canvas.getBoundingClientRect();this.canvas.width=t.width*h.settings.resolution,this.canvas.height=t.height*h.settings.resolution,p.updateTransform(),h.settings.fps!==0&&this.update(0)}static reset(){this.camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0}}static update(t){const i=this.camera.x,s=this.camera.y,r=this.camera.scale;this.camera.scale*=1+this.camera.scaleSpeed*t,this.camera.scale=Math.min(500,this.camera.scale);const n=i+u.mouse.editorX/r,a=s+u.mouse.editorY/r,c=this.camera.scale/r;if(this.camera.x=n+(i-n)/c,this.camera.y=a+(s-a)/c,this.camera.x+=this.camera.xSpeed*t/this.camera.scale*h.settings.resolution,this.camera.y+=this.camera.ySpeed*t/this.camera.scale*h.settings.resolution,this.camera.xSpeed*=Math.pow(.99,t),this.camera.ySpeed*=Math.pow(.99,t),this.camera.scaleSpeed*=Math.pow(.99,t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,p.data!==null){const _=p.data.transform;if(this.ctx.drawImage(p.data.element,(_.x-this.camera.x)*this.camera.scale,(_.y-this.camera.y)*this.camera.scale,_.width*this.camera.scale,_.height*this.camera.scale),p.update(),this.ctx.drawImage(p.canvas,(_.x-this.camera.x)*this.camera.scale,(_.y-this.camera.y)*this.camera.scale,_.width*this.camera.scale,_.height*this.camera.scale),this.ctx.fillStyle="rgba(255,0,0,0.5)",this.ctx.strokeStyle="rgba(255,0,0,0.5)",u.strokeType===1&&u.startX===null&&u.startY===null){const l=je()+Math.PI/2,f=(p.data.transform.width+p.data.transform.height)*(u.strokeSize/2*.0025)*m.camera.scale,o=u.mouse.editorX+f*Math.cos(l),g=u.mouse.editorY+f*Math.sin(l),d=u.mouse.editorX+f*Math.cos(l+Math.PI),S=u.mouse.editorY+f*Math.sin(l+Math.PI);this.ctx.lineCap="butt",this.ctx.lineWidth=2.5*m.camera.scale,this.ctx.moveTo(o,g),this.ctx.lineTo(d,S),this.ctx.stroke(),this.ctx.beginPath()}else if(u.strokeType===2&&u.startX===null&&u.startY===null)this.ctx.arc(u.mouse.editorX,u.mouse.editorY,(p.data.transform.width+p.data.transform.height)*(u.strokeSize/2*.0025)*this.camera.scale,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath();else if(u.strokeType===3)for(const l of u.strokePoints)this.ctx.arc((p.data.transform.x+l.x*p.data.transform.widthScale-this.camera.x)*this.camera.scale,(p.data.transform.y+l.y*p.data.transform.heightScale-this.camera.y)*this.camera.scale,5*h.settings.resolution,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath();u.saveConfirm>0&&(this.ctx.fillStyle=`rgba(255,255,255,${u.saveConfirm})`,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height))}}}window.addEventListener("load",()=>{m.resize(),window.addEventListener("resize",()=>m.resize())});m.canvas.addEventListener("contextmenu",e=>{e.preventDefault()});m.canvas.addEventListener("click",()=>{h.updateLayout({help:!1,settings:!1})});const We=()=>{const e=i=>{const s=i.substring(0,20).toLowerCase().split("");for(let r=s.length-1;r>=0;r--)"abcdefghijklmnopqrstuvwxyz0123456789".includes(s[r])||s.splice(r,1);s.length>=5&&h.updateSettings({username:s.slice(0,16).join("")})},t=i=>{m.camera.x/=h.settings.resolution,m.camera.y/=h.settings.resolution,h.updateSettings({resolution:i}),m.camera.x*=h.settings.resolution,m.camera.y*=h.settings.resolution,m.resize()};return v("div",{class:"shadow",style:{display:h.layout.settings?"block":"none",border:"0.05rem solid ",borderRadius:"0.5rem",marginBottom:"var(--spacing-medium)",overflow:"hidden"},children:[v("h3",{class:h.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{padding:"var(--spacing-medium)"},children:"Settings"}),v("div",{class:h.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",children:[v("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),v("div",{style:{padding:"var(--spacing-medium)"},children:[v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Username:"}),v("input",{value:h.settings.username,onChange:i=>e(i.target.value)})]}),v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"FPS:"}),v("input",{type:"range",step:"10",min:"0",max:"120",value:h.settings.fps,onInput:i=>h.updateSettings({fps:parseInt(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),v("p",{children:h.settings.fps===0?"(VSync)":`(${h.settings.fps})`})]}),v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Resolution:"}),v("input",{type:"range",step:"0.1",min:"0.5",max:"2",value:h.settings.resolution,onInput:i=>t(parseFloat(i.target.value)),style:{marginRight:"var(--spacing-small)"}}),v("p",{children:h.settings.resolution===window.devicePixelRatio?"(Native)":`(${h.settings.resolution}x)`})]}),v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Preload Image:"}),v("input",{type:"range",step:"1",min:"0",max:"10",value:h.settings.preload,onInput:i=>h.updateSettings({preload:parseInt(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),v("p",{children:h.settings.preload===5?"(Default)":`(${h.settings.preload})`})]}),v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Move Speed:"}),v("input",{type:"range",step:"0.1",min:"0.5",max:"1.5",value:h.settings.moveSpeed,onInput:i=>h.updateSettings({moveSpeed:parseFloat(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),v("p",{children:h.settings.moveSpeed===1?"(Default)":`(${h.settings.moveSpeed}x)`})]}),v("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Scale Speed:"}),v("input",{type:"range",step:"0.1",min:"0.5",max:"1.5",value:h.settings.scaleSpeed,onInput:i=>h.updateSettings({scaleSpeed:parseFloat(i.target.value)}),style:{marginRight:"var(--spacing-small)"}}),v("p",{children:h.settings.scaleSpeed===1?"(Default)":`(${h.settings.scaleSpeed}x)`})]}),v("div",{style:{display:"flex",alignItems:"center"},children:[v("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Reduce Transparency:"}),v("input",{type:"checkbox",checked:h.settings.reduceTransparency,onChange:i=>h.updateSettings({reduceTransparency:i.target.checked})})]})]})]})]})},Fe=()=>{const e=t=>{h.updateSource({value:t,display:t}),p.next()};return v("nav",{class:h.settings.reduceTransparency?"container-solid-light shadow":"container-glassy-light shadow",style:{position:"fixed",display:"flex",alignItems:"center",left:"0rem",top:"0rem",width:"100%",height:"3.5rem"},children:[v("h1",{style:{textWrap:"nowrap",marginLeft:"var(--spacing-medium)",marginRight:"var(--spacing-medium)"},children:"Dataset Editor"}),v("button",{onClick:()=>h.updateLayout({help:!h.layout.help}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Help"}),v("button",{onClick:()=>h.updateLayout({settings:!h.layout.settings}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Settings"}),v("div",{style:"flex: 1"}),v("select",{onChange:t=>h.updateSource({driver:t.target.value}),style:{marginRight:"var(--spacing-small)"},children:Object.keys(p.drivers).map(t=>v("option",{value:p.drivers[t].id,selected:t===h.source.driver?!0:void 0,children:p.drivers[t].name}))}),v("input",{value:h.source.display,autocomplete:"off",onChange:t=>e(t.target.value),style:{width:"7.5rem",marginRight:"var(--spacing-small)"}}),v("button",{style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Entries"})]})};se(v(Fe,{}),document.getElementById("container-navbar"));se(v(We,{}),document.getElementById("container-settings"));let mt=performance.now();function bt(){const e=performance.now()-mt;mt=performance.now(),u.update(e),m.update(e),h.settings.fps===0?requestAnimationFrame(bt):setTimeout(bt,1e3/h.settings.fps-(performance.now()-mt))}let ge=!0;async function lt(){try{const e=await p.drivers[h.source.driver].preload(h.settings.preload);e===null?setTimeout(lt,100):(await fetch(e.url),lt())}catch{ge=!1}}window.addEventListener("load",()=>{bt(),lt(),p.next(),h.sourceSignal.subscribe(()=>{ge||lt()})});
