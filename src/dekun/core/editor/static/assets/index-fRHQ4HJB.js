(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();var ye,k,lt,ct,D,We,ht,ut,dt,He,Me,Oe,se={},pt=[],Ht=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xe=Array.isArray;function j(t,e){for(var i in e)t[i]=e[i];return t}function Ye(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Yt(t,e,i){var s,n,a,o={};for(a in e)a=="key"?s=e[a]:a=="ref"?n=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?ye.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)o[a]===void 0&&(o[a]=t.defaultProps[a]);return de(t,o,s,n,null)}function de(t,e,i,s,n){var a={type:t,props:e,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++lt,__i:-1,__u:0};return n==null&&k.vnode!=null&&k.vnode(a),a}function ne(t){return t.children}function te(t,e){this.props=t,this.context=e}function V(t,e){if(e==null)return t.__?V(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?V(t):null}function ft(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return ft(t)}}function Ve(t){(!t.__d&&(t.__d=!0)&&D.push(t)&&!fe.__r++||We!=k.debounceRendering)&&((We=k.debounceRendering)||ht)(fe)}function fe(){for(var t,e,i,s,n,a,o,u=1;D.length;)D.length>u&&D.sort(ut),t=D.shift(),u=D.length,t.__d&&(i=void 0,s=void 0,n=(s=(e=t).__v).__e,a=[],o=[],e.__P&&((i=j({},s)).__v=s.__v+1,k.vnode&&k.vnode(i),ze(e.__P,i,s,e.__n,e.__P.namespaceURI,32&s.__u?[n]:null,a,n??V(s),!!(32&s.__u),o),i.__v=s.__v,i.__.__k[i.__i]=i,gt(a,i,o),s.__e=s.__=null,i.__e!=n&&ft(i)));fe.__r=0}function _t(t,e,i,s,n,a,o,u,d,c,g){var l,v,_,$,M,I,x,w=s&&s.__k||pt,O=e.length;for(d=zt(i,e,w,d,O),l=0;l<O;l++)(_=i.__k[l])!=null&&(v=_.__i==-1?se:w[_.__i]||se,_.__i=l,I=ze(t,_,v,n,a,o,u,d,c,g),$=_.__e,_.ref&&v.ref!=_.ref&&(v.ref&&De(v.ref,null,_),g.push(_.ref,_.__c||$,_)),M==null&&$!=null&&(M=$),(x=!!(4&_.__u))||v.__k===_.__k?d=mt(_,d,t,x):typeof _.type=="function"&&I!==void 0?d=I:$&&(d=$.nextSibling),_.__u&=-7);return i.__e=M,d}function zt(t,e,i,s,n){var a,o,u,d,c,g=i.length,l=g,v=0;for(t.__k=new Array(n),a=0;a<n;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(d=a+v,(o=t.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?de(null,o,null,null,null):xe(o)?de(ne,{children:o},null,null,null):o.constructor==null&&o.__b>0?de(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,u=null,(c=o.__i=Dt(o,i,d,l))!=-1&&(l--,(u=i[c])&&(u.__u|=2)),u==null||u.__v==null?(c==-1&&(n>g?v--:n<g&&v++),typeof o.type!="function"&&(o.__u|=4)):c!=d&&(c==d-1?v--:c==d+1?v++:(c>d?v--:v++,o.__u|=4))):t.__k[a]=null;if(l)for(a=0;a<g;a++)(u=i[a])!=null&&(2&u.__u)==0&&(u.__e==s&&(s=V(u)),yt(u,u));return s}function mt(t,e,i,s){var n,a;if(typeof t.type=="function"){for(n=t.__k,a=0;n&&a<n.length;a++)n[a]&&(n[a].__=t,e=mt(n[a],e,i,s));return e}t.__e!=e&&(s&&(e&&t.type&&!e.parentNode&&(e=V(t)),i.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Dt(t,e,i,s){var n,a,o,u=t.key,d=t.type,c=e[i],g=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||g&&u==c.key&&d==c.type)return i;if(s>(g?1:0)){for(n=i-1,a=i+1;n>=0||a<e.length;)if((c=e[o=n>=0?n--:a++])!=null&&(2&c.__u)==0&&u==c.key&&d==c.type)return o}return-1}function qe(t,e,i){e[0]=="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||Ht.test(e)?i:i+"px"}function ce(t,e,i,s,n){var a,o;e:if(e=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)i&&e in i||qe(t.style,e,"");if(i)for(e in i)s&&i[e]==s[e]||qe(t.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(dt,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=i,i?s?i.u=s.u:(i.u=He,t.addEventListener(e,a?Oe:Me,a)):t.removeEventListener(e,a?Oe:Me,a);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&i==1?"":i))}}function Ge(t){return function(e){if(this.l){var i=this.l[e.type+t];if(e.t==null)e.t=He++;else if(e.t<i.u)return;return i(k.event?k.event(e):e)}}}function ze(t,e,i,s,n,a,o,u,d,c){var g,l,v,_,$,M,I,x,w,O,H,oe,J,Fe,le,Z,we,A=e.type;if(e.constructor!=null)return null;128&i.__u&&(d=!!(32&i.__u),a=[u=e.__e=i.__e]),(g=k.__b)&&g(e);e:if(typeof A=="function")try{if(x=e.props,w="prototype"in A&&A.prototype.render,O=(g=A.contextType)&&s[g.__c],H=g?O?O.props.value:g.__:s,i.__c?I=(l=e.__c=i.__c).__=l.__E:(w?e.__c=l=new A(x,H):(e.__c=l=new te(x,H),l.constructor=A,l.render=Bt),O&&O.sub(l),l.props=x,l.state||(l.state={}),l.context=H,l.__n=s,v=l.__d=!0,l.__h=[],l._sb=[]),w&&l.__s==null&&(l.__s=l.state),w&&A.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=j({},l.__s)),j(l.__s,A.getDerivedStateFromProps(x,l.__s))),_=l.props,$=l.state,l.__v=e,v)w&&A.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),w&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(w&&A.getDerivedStateFromProps==null&&x!==_&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(x,H),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(x,l.__s,H)===!1||e.__v==i.__v){for(e.__v!=i.__v&&(l.props=x,l.state=l.__s,l.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(B){B&&(B.__=e)}),oe=0;oe<l._sb.length;oe++)l.__h.push(l._sb[oe]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(x,l.__s,H),w&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(_,$,M)})}if(l.context=H,l.props=x,l.__P=t,l.__e=!1,J=k.__r,Fe=0,w){for(l.state=l.__s,l.__d=!1,J&&J(e),g=l.render(l.props,l.state,l.context),le=0;le<l._sb.length;le++)l.__h.push(l._sb[le]);l._sb=[]}else do l.__d=!1,J&&J(e),g=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++Fe<25);l.state=l.__s,l.getChildContext!=null&&(s=j(j({},s),l.getChildContext())),w&&!v&&l.getSnapshotBeforeUpdate!=null&&(M=l.getSnapshotBeforeUpdate(_,$)),Z=g,g!=null&&g.type===ne&&g.key==null&&(Z=vt(g.props.children)),u=_t(t,xe(Z)?Z:[Z],e,i,s,n,a,o,u,d,c),l.base=e.__e,e.__u&=-161,l.__h.length&&o.push(l),I&&(l.__E=l.__=null)}catch(B){if(e.__v=null,d||a!=null)if(B.then){for(e.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,e.__e=u}else{for(we=a.length;we--;)Ye(a[we]);Le(e)}else e.__e=i.__e,e.__k=i.__k,B.then||Le(e);k.__e(B,e,i)}else a==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):u=e.__e=Xt(i.__e,e,i,s,n,a,o,d,c);return(g=k.diffed)&&g(e),128&e.__u?void 0:u}function Le(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Le)}function gt(t,e,i){for(var s=0;s<i.length;s++)De(i[s],i[++s],i[++s]);k.__c&&k.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(a){a.call(n)})}catch(a){k.__e(a,n.__v)}})}function vt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:xe(t)?t.map(vt):j({},t)}function Xt(t,e,i,s,n,a,o,u,d){var c,g,l,v,_,$,M,I=i.props,x=e.props,w=e.type;if(w=="svg"?n="http://www.w3.org/2000/svg":w=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),a!=null){for(c=0;c<a.length;c++)if((_=a[c])&&"setAttribute"in _==!!w&&(w?_.localName==w:_.nodeType==3)){t=_,a[c]=null;break}}if(t==null){if(w==null)return document.createTextNode(x);t=document.createElementNS(n,w,x.is&&x),u&&(k.__m&&k.__m(e,a),u=!1),a=null}if(w==null)I===x||u&&t.data==x||(t.data=x);else{if(a=a&&ye.call(t.childNodes),I=i.props||se,!u&&a!=null)for(I={},c=0;c<t.attributes.length;c++)I[(_=t.attributes[c]).name]=_.value;for(c in I)if(_=I[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=_;else if(!(c in x)){if(c=="value"&&"defaultValue"in x||c=="checked"&&"defaultChecked"in x)continue;ce(t,c,null,_,n)}}for(c in x)_=x[c],c=="children"?v=_:c=="dangerouslySetInnerHTML"?g=_:c=="value"?$=_:c=="checked"?M=_:u&&typeof _!="function"||I[c]===_||ce(t,c,_,I[c],n);if(g)u||l&&(g.__html==l.__html||g.__html==t.innerHTML)||(t.innerHTML=g.__html),e.__k=[];else if(l&&(t.innerHTML=""),_t(e.type=="template"?t.content:t,xe(v)?v:[v],e,i,s,w=="foreignObject"?"http://www.w3.org/1999/xhtml":n,a,o,a?a[0]:i.__k&&V(i,0),u,d),a!=null)for(c=a.length;c--;)Ye(a[c]);u||(c="value",w=="progress"&&$==null?t.removeAttribute("value"):$!=null&&($!==t[c]||w=="progress"&&!$||w=="option"&&$!=I[c])&&ce(t,c,$,I[c],n),c="checked",M!=null&&M!=t[c]&&ce(t,c,M,I[c],n))}return t}function De(t,e,i){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&e==null||(t.__u=t(e))}else t.current=e}catch(n){k.__e(n,i)}}function yt(t,e,i){var s,n;if(k.unmount&&k.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||De(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){k.__e(a,e)}s.base=s.__P=null}if(s=t.__k)for(n=0;n<s.length;n++)s[n]&&yt(s[n],e,i||typeof t.type!="function");i||Ye(t.__e),t.__c=t.__=t.__e=void 0}function Bt(t,e,i){return this.constructor(t,i)}function be(t,e,i){var s,n,a,o;e==document&&(e=document.documentElement),k.__&&k.__(t,e),n=(s=!1)?null:e.__k,a=[],o=[],ze(e,t=e.__k=Yt(ne,null,[t]),n||se,se,e.namespaceURI,n?null:e.firstChild?ye.call(e.childNodes):null,a,n?n.__e:e.firstChild,s,o),gt(a,t,o)}ye=pt.slice,k={__e:function(t,e,i,s){for(var n,a,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((a=n.constructor)&&a.getDerivedStateFromError!=null&&(n.setState(a.getDerivedStateFromError(t)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,s||{}),o=n.__d),o)return n.__E=n}catch(u){t=u}throw t}},lt=0,ct=function(t){return t!=null&&t.constructor==null},te.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof t=="function"&&(t=t(j({},i),this.props)),t&&j(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ve(this))},te.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ve(this))},te.prototype.render=ne,D=[],ht=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ut=function(t,e){return t.__v.__b-e.__v.__b},fe.__r=0,dt=/(PointerCapture)$|Capture$/i,He=0,Me=Ge(!1),Oe=Ge(!0);var Ut=0;function r(t,e,i,s,n,a){e||(e={});var o,u,d=e;if("ref"in d)for(u in d={},e)u=="ref"?o=e[u]:d[u]=e[u];var c={type:t,props:d,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ut,__i:-1,__u:0,__source:n,__self:a};if(typeof t=="function"&&(o=t.defaultProps))for(u in o)d[u]===void 0&&(d[u]=o[u]);return k.vnode&&k.vnode(c),c}var ae,R,Se,Je,_e=0,xt=[],T=k,Ze=T.__b,Ke=T.__r,Qe=T.diffed,et=T.__c,tt=T.unmount,it=T.__;function Xe(t,e){T.__h&&T.__h(R,t,_e||e),_e=0;var i=R.__H||(R.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function bt(t){return _e=1,Ft(Ct,t)}function Ft(t,e,i){var s=Xe(ae++,2);if(s.t=t,!s.__c&&(s.__=[Ct(void 0,e),function(u){var d=s.__N?s.__N[0]:s.__[0],c=s.t(d,u);d!==c&&(s.__N=[c,s.__[1]],s.__c.setState({}))}],s.__c=R,!R.__f)){var n=function(u,d,c){if(!s.__c.__H)return!0;var g=s.__c.__H.__.filter(function(v){return!!v.__c});if(g.every(function(v){return!v.__N}))return!a||a.call(this,u,d,c);var l=s.__c.props!==u;return g.forEach(function(v){if(v.__N){var _=v.__[0];v.__=v.__N,v.__N=void 0,_!==v.__[0]&&(l=!0)}}),a&&a.call(this,u,d,c)||l};R.__f=!0;var a=R.shouldComponentUpdate,o=R.componentWillUpdate;R.componentWillUpdate=function(u,d,c){if(this.__e){var g=a;a=void 0,n(u,d,c),a=g}o&&o.call(this,u,d,c)},R.shouldComponentUpdate=n}return s.__N||s.__}function kt(t,e){var i=Xe(ae++,3);!T.__s&&St(i.__H,e)&&(i.__=t,i.u=e,R.__H.__h.push(i))}function ee(t){return _e=5,wt(function(){return{current:t}},[])}function wt(t,e){var i=Xe(ae++,7);return St(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function Wt(){for(var t;t=xt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(pe),t.__H.__h.forEach(Ne),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){R=null,Ze&&Ze(t)},T.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),it&&it(t,e)},T.__r=function(t){Ke&&Ke(t),ae=0;var e=(R=t.__c).__H;e&&(Se===R?(e.__h=[],R.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(pe),e.__h.forEach(Ne),e.__h=[],ae=0)),Se=R},T.diffed=function(t){Qe&&Qe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(xt.push(e)!==1&&Je===T.requestAnimationFrame||((Je=T.requestAnimationFrame)||Vt)(Wt)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),Se=R=null},T.__c=function(t,e){e.some(function(i){try{i.__h.forEach(pe),i.__h=i.__h.filter(function(s){return!s.__||Ne(s)})}catch(s){e.some(function(n){n.__h&&(n.__h=[])}),e=[],T.__e(s,i.__v)}}),et&&et(t,e)},T.unmount=function(t){tt&&tt(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(s){try{pe(s)}catch(n){e=n}}),i.__H=void 0,e&&T.__e(e,i.__v))};var st=typeof requestAnimationFrame=="function";function Vt(t){var e,i=function(){clearTimeout(s),st&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(i,35);st&&(e=requestAnimationFrame(i))}function pe(t){var e=R,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),R=e}function Ne(t){var e=R;t.__c=t.__(),R=e}function St(t,e){return!t||t.length!==e.length||e.some(function(i,s){return i!==t[s]})}function Ct(t,e){return typeof e=="function"?e(t):e}var qt=Symbol.for("preact-signals");function ke(){if(Y>1)Y--;else{for(var t,e=!1;ie!==void 0;){var i=ie;for(ie=void 0,Ae++;i!==void 0;){var s=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&Rt(i))try{i.c()}catch(n){e||(t=n,e=!0)}i=s}}if(Ae=0,Y--,e)throw t}}function Be(t){if(Y>0)return t();Y++;try{return t()}finally{ke()}}var b=void 0;function $t(t){var e=b;b=void 0;try{return t()}finally{b=e}}var ie=void 0,Y=0,Ae=0,me=0;function It(t){if(b!==void 0){var e=t.n;if(e===void 0||e.t!==b)return e={i:0,S:t,p:b.s,n:void 0,t:b,e:void 0,x:void 0,r:e},b.s!==void 0&&(b.s.n=e),b.s=e,t.n=e,32&b.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=b.s,e.n=void 0,b.s.n=e,b.s=e),e}}function P(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}P.prototype.brand=qt;P.prototype.h=function(){return!0};P.prototype.S=function(t){var e=this,i=this.t;i!==t&&t.e===void 0&&(t.x=i,this.t=t,i!==void 0?i.e=t:$t(function(){var s;(s=e.W)==null||s.call(e)}))};P.prototype.U=function(t){var e=this;if(this.t!==void 0){var i=t.e,s=t.x;i!==void 0&&(i.x=s,t.e=void 0),s!==void 0&&(s.e=i,t.x=void 0),t===this.t&&(this.t=s,s===void 0&&$t(function(){var n;(n=e.Z)==null||n.call(e)}))}};P.prototype.subscribe=function(t){var e=this;return re(function(){var i=e.value,s=b;b=void 0;try{t(i)}finally{b=s}},{name:"sub"})};P.prototype.valueOf=function(){return this.value};P.prototype.toString=function(){return this.value+""};P.prototype.toJSON=function(){return this.value};P.prototype.peek=function(){var t=b;b=void 0;try{return this.value}finally{b=t}};Object.defineProperty(P.prototype,"value",{get:function(){var t=It(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Ae>100)throw new Error("Cycle detected");this.v=t,this.i++,me++,Y++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{ke()}}}});function z(t,e){return new P(t,e)}function Rt(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Tt(t){for(var e=t.s;e!==void 0;e=e.n){var i=e.S.n;if(i!==void 0&&(e.r=i),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Pt(t){for(var e=t.s,i=void 0;e!==void 0;){var s=e.p;e.i===-1?(e.S.U(e),s!==void 0&&(s.n=e.n),e.n!==void 0&&(e.n.p=s)):i=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=s}t.s=i}function X(t,e){P.call(this,void 0),this.x=t,this.s=void 0,this.g=me-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}X.prototype=new P;X.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===me))return!0;if(this.g=me,this.f|=1,this.i>0&&!Rt(this))return this.f&=-2,!0;var t=b;try{Tt(this),b=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return b=t,Pt(this),this.f&=-2,!0};X.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}P.prototype.S.call(this,t)};X.prototype.U=function(t){if(this.t!==void 0&&(P.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};X.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(X.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=It(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function at(t,e){return new X(t,e)}function Et(t){var e=t.u;if(t.u=void 0,typeof e=="function"){Y++;var i=b;b=void 0;try{e()}catch(s){throw t.f&=-2,t.f|=8,Ue(t),s}finally{b=i,ke()}}}function Ue(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Et(t)}function Gt(t){if(b!==this)throw new Error("Out-of-order effect");Pt(this),b=t,this.f&=-2,8&this.f&&Ue(this),ke()}function q(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}q.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};q.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Et(this),Tt(this),Y++;var t=b;return b=this,Gt.bind(this,t)};q.prototype.N=function(){2&this.f||(this.f|=2,this.o=ie,ie=this)};q.prototype.d=function(){this.f|=8,1&this.f||Ue(this)};q.prototype.dispose=function(){this.d()};function re(t,e){var i=new q(t,e);try{i.c()}catch(n){throw i.d(),n}var s=i.d.bind(i);return s[Symbol.dispose]=s,s}var Mt,Ce,Ot=[];re(function(){Mt=this.N})();function G(t,e){k[t]=e.bind(null,k[t]||function(){})}function ge(t){Ce&&Ce(),Ce=t&&t.S()}function Lt(t){var e=this,i=t.data,s=Zt(i);s.value=i;var n=wt(function(){for(var u=e,d=e.__v;d=d.__;)if(d.__c){d.__c.__$f|=4;break}var c=at(function(){var _=s.value.value;return _===0?0:_===!0?"":_||""}),g=at(function(){return!Array.isArray(c.value)&&!ct(c.value)}),l=re(function(){if(this.N=Nt,g.value){var _=c.value;u.__v&&u.__v.__e&&u.__v.__e.nodeType===3&&(u.__v.__e.data=_)}}),v=e.__$u.d;return e.__$u.d=function(){l(),v.call(this)},[g,c]},[]),a=n[0],o=n[1];return a.value?o.peek():o.value}Lt.displayName="ReactiveTextNode";Object.defineProperties(P.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Lt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});G("__b",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof e.type=="string"){var i,s=e.props;for(var n in s)if(n!=="children"){var a=s[n];a instanceof P&&(i||(e.__np=i={}),i[n]=a,s[n]=a.peek())}}t(e)});G("__r",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(e.type.displayName||e.type.name||"Unknown"),e.type!==ne){ge();var i,s=e.__c;s&&(s.__$f&=-2,(i=s.__$u)===void 0&&(s.__$u=i=(function(n){var a;return re(function(){a=this}),a.c=function(){s.__$f|=1,s.setState({})},a})())),ge(i)}t(e)});G("__e",function(t,e,i,s){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ge(),t(e,i,s)});G("diffed",function(t,e){typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),ge();var i;if(typeof e.type=="string"&&(i=e.__e)){var s=e.__np,n=e.props;if(s){var a=i.U;if(a)for(var o in a){var u=a[o];u!==void 0&&!(o in s)&&(u.d(),a[o]=void 0)}else a={},i.U=a;for(var d in s){var c=a[d],g=s[d];c===void 0?(c=Jt(i,d,g,n),a[d]=c):c.o(g,n)}}}t(e)});function Jt(t,e,i,s){var n=e in t&&t.ownerSVGElement===void 0,a=z(i);return{o:function(o,u){a.value=o,s=u},d:re(function(){this.N=Nt;var o=a.value.value;s[e]!==o&&(s[e]=o,n?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}G("unmount",function(t,e){if(typeof e.type=="string"){var i=e.__e;if(i){var s=i.U;if(s){i.U=void 0;for(var n in s){var a=s[n];a&&a.d()}}}}else{var o=e.__c;if(o){var u=o.__$u;u&&(o.__$u=void 0,u.d())}}t(e)});G("__h",function(t,e,i,s){(s<3||s===9)&&(e.__$f|=2),t(e,i,s)});te.prototype.shouldComponentUpdate=function(t,e){var i=this.__$u,s=i&&i.s!==void 0;for(var n in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var a=2&this.__$f;if(!(s||a||4&this.__$f)||1&this.__$f)return!0}else if(!(s||4&this.__$f)||3&this.__$f)return!0;for(var o in t)if(o!=="__source"&&t[o]!==this.props[o])return!0;for(var u in this.props)if(!(u in t))return!0;return!1};function Zt(t,e){return bt(function(){return z(t,e)})[0]}var Kt=function(t){queueMicrotask(function(){queueMicrotask(t)})};function Qt(){Be(function(){for(var t;t=Ot.shift();)Mt.call(t)})}function Nt(){Ot.push(this)===1&&(k.requestAnimationFrame||Kt)(Qt)}const U=[];async function nt(){const t=await(await fetch("/api/drivers/danbooru/random")).text(),e=await(await fetch(`/api/drivers/danbooru/post/${t}`)).json();return{id:t,page:1,url:`/resource/danbooru/${e.file_url.substring(e.file_url.lastIndexOf("/")+1)}`,source:`${t}/1`}}const ei={id:"danbooru",name:"Danbooru",async next(t){if(t.split("/").map(i=>i.trim()).filter(i=>i.length>0).length>0){const i=await(await fetch(`/api/drivers/danbooru/post/${t[0]}`)).json();return{id:t[0],page:1,url:`/resource/danbooru/${i.file_url.substring(i.file_url.lastIndexOf("/")+1)}`,source:`${t[0]}/1`}}return U.length>0?Object.assign(U.splice(0,1)[0],{source:""}):Object.assign(await nt(),{source:""})},async preload(t){if(U.length<t){const e=U[U.push(await nt())-1];return{id:e.id,page:e.page,url:e.url,amount:U.length}}}},ti=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"}));let $e=null,S=null;const F=[];async function rt(){$e===null&&($e=await(await fetch("/api/drivers/nhentai/latest")).json());const t=Math.round(Math.random()*$e),e=await(await fetch(`/api/drivers/nhentai/pages/${t}`)).json(),i=Math.floor(Math.random()*e.length),s=e[i].split("/");return{id:t.toString(),page:i+1,url:`/resource/nhentai/${s.slice(4,6).join("/")}`,source:`${t}/${i+1}`}}const ii={id:"nhentai",name:"nHentai",async next(t){const e=t.split("/").map(i=>i.trim()).filter(i=>i.length>0);if(e.length>0){if(S===null||e[0]!==S.id)S={id:e[0],pages:(await(await fetch(`/api/drivers/nhentai/pages/${e[0]}`)).json()).map(i=>`/resource/nhentai/${i.split("/").slice(4,6).join("/")}`),index:e.length>1?parseInt(e[1])-1:0,cacheIndex:e.length>1?parseInt(e[1])-1:0};else{const i=isNaN(parseInt(e[1]))?1:parseInt(e[1])-1;S.index=i===S.index?S.index+1:i}return S.index>=S.pages.length?(S=null,await this.next("")):{id:S.id,page:S.index+1,url:S.pages[S.index],source:`${S.id}/${S.index+1}`}}return F.length>0?Object.assign(F.splice(0,1)[0],{source:""}):Object.assign(await rt(),{source:""})},async preload(t){if(S===null){if(F.length<t){const e=F[F.push(await rt())-1];return{id:e.id,page:e.page,url:e.url,amount:F.length}}}else if(S.cacheIndex<Math.min(S.index+t,S.pages.length))return S.cacheIndex++,{id:S.id,page:S.cacheIndex,url:S.pages[S.cacheIndex-1],amount:S.cacheIndex-S.index}}},si=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"}));let C=null;const W=[];async function ot(){const t=(await(await fetch("/api/drivers/pixiv/discovery")).json()).body.illusts,e=t[Math.floor(Math.random()*t.length)],i=(await(await fetch(`/api/drivers/pixiv/pages/${e.id}`)).json()).body,s=Math.floor(Math.random()*e.pageCount),n=i[s].urls.original.split("/");return{id:`${e.id}`,page:s+1,url:`/resource/pixiv/${n.slice(5,11).join("-")}/${n[11]}`,source:`${e.id}/${s+1}`}}const ai={id:"pixiv",name:"Pixiv",async next(t){const e=t.split("/").map(i=>i.trim()).filter(i=>i.length>0);if(e.length>0){if(C===null||e[0]!==C.id)C={id:e[0],pages:(await(await fetch(`/api/drivers/pixiv/pages/${e[0]}`)).json()).body.map(i=>{const s=i.urls.original.split("/");return`/resource/pixiv/${s.slice(5,11).join("-")}/${s[11]}`}),index:e.length>1?parseInt(e[1])-1:0,cacheIndex:e.length>1?parseInt(e[1])-1:0};else{const i=isNaN(parseInt(e[1]))?1:parseInt(e[1])-1;C.index=i===C.index?C.index+1:i}return C.index>=C.pages.length?(C=null,await this.next("")):{id:C.id,page:C.index+1,url:C.pages[C.index],source:`${C.id}/${C.index+1}`}}return W.length>0?Object.assign(W.splice(0,1)[0],{source:""}):Object.assign(await ot(),{source:""})},preload:async t=>{if(C===null){if(W.length<t){const e=W[W.push(await ot())-1];return{id:e.id,page:e.page,url:e.url,amount:W.length}}}else if(C.cacheIndex<Math.min(C.index+t,C.pages.length))return C.cacheIndex++,{id:C.id,page:C.cacheIndex,url:C.pages[C.cacheIndex-1],amount:C.cacheIndex-C.index};return null}},ni=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),Ie=Object.assign({"./drivers/danbooru.ts":ti,"./drivers/nhentai.ts":si,"./drivers/pixiv.ts":ni});class f{static canvas=document.createElement("canvas");static ctx=this.canvas.getContext("2d");static overlayCanvas=document.createElement("canvas");static overlayCtx=this.overlayCanvas.getContext("2d");static submitCanvas=document.createElement("canvas");static submitCtx=this.submitCanvas.getContext("2d");static drivers={pixiv:Ie["./drivers/pixiv.ts"].default,nhentai:Ie["./drivers/nhentai.ts"].default,danbooru:Ie["./drivers/danbooru.ts"].default};static data=null;static timestamp=0;static async next(e){h.updateSource({locked:!0});const i=this.data,s=performance.now();this.data=null,this.timestamp=performance.now();try{const n=e===void 0?h.source.driver:e.driver,a=await this.drivers[n].next(e===void 0?h.source.value:`${e.id}/${e.page}`);if(a===null)this.data=i;else{h.updateSource({value:a.source,display:`${a.id}/${a.page}`});const o=document.createElement("img");o.src=a.url,o.addEventListener("load",()=>{this.timestamp===s&&(this.data={provider:n,id:a.id,page:a.page,element:o,transform:this.calculateTransform(o.width,o.height),strokes:[]},this.canvas.width=o.width,this.canvas.height=o.height,this.overlayCanvas.width=o.width,this.overlayCanvas.height=o.height,h.settings.randomStrokes&&(this.generateRandomStrokes(),this.renderImage()),m.reset(),p.reset())})}}catch{this.data=i}h.updateSource({locked:!1})}static async submit(){if(this.data!==null){const e=this.data;this.data=null,m.reset(),p.reset(),this.submitCanvas.width=e.element.width,this.submitCanvas.height=e.element.height,this.submitCtx.fillStyle="white",this.submitCtx.strokeStyle="white";for(const n of e.strokes)if(n.type===1||n.type===2)this.submitCtx.lineCap=n.type===1?"butt":"round",this.submitCtx.lineWidth=(e.element.width+e.element.height)*(n.size*.0025),this.submitCtx.moveTo(n.x1,n.y1),this.submitCtx.lineTo(n.x2,n.y2),this.submitCtx.stroke(),this.submitCtx.beginPath();else if(n.type===3){for(const[a,o]of n.points.entries())a===0?this.submitCtx.moveTo(o.x,o.y):this.submitCtx.lineTo(o.x,o.y);this.submitCtx.lineTo(n.points[0].x,n.points[0].y),this.submitCtx.fill(),this.submitCtx.beginPath()}const i=this.submitCanvas.toDataURL("image/png",1).substring(22);this.submitCtx.clearRect(0,0,this.submitCanvas.width,this.submitCanvas.height),this.submitCtx.imageSmoothingEnabled=!1,this.submitCtx.drawImage(e.element,0,0,this.submitCanvas.width,this.submitCanvas.height);const s=this.submitCanvas.toDataURL("image/jpeg",1).substring(23);try{await fetch("/api/submit",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.provider,id:e.id,page:e.page,image:s,mask:i,author:h.settings.username})}),await this.next()}catch{this.data=e}}}static renderImage(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,this.data!==null&&p.strokeOpacity>0){this.ctx.fillStyle=`rgba(0,255,0,${p.strokeOpacity})`,this.ctx.strokeStyle=`rgba(0,255,0,${p.strokeOpacity})`;for(const e of this.data.strokes)if(e.type===1||e.type===2)this.ctx.lineCap=e.type===1?"butt":"round",this.ctx.lineWidth=(this.data.element.width+this.data.element.height)*(e.size*.0025),this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.beginPath();else if(e.type===3){for(const[i,s]of e.points.entries())i===0?this.ctx.moveTo(s.x,s.y):this.ctx.lineTo(s.x,s.y);this.ctx.lineTo(e.points[0].x,e.points[0].y),this.ctx.fill(),this.ctx.beginPath()}}return this.canvas}static renderOverlay(){if(this.overlayCtx.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.overlayCtx.imageSmoothingEnabled=!1,this.data!==null){if(this.overlayCtx.fillStyle="rgba(0,255,0,0.5)",this.overlayCtx.strokeStyle="rgba(0,255,0,0.5)",p.strokeType===1||p.strokeType===2)p.startX!==null&&p.startY!==null&&(this.overlayCtx.lineCap=p.strokeType===1?"butt":"round",this.overlayCtx.lineWidth=(this.data.element.width+this.data.element.height)*(p.strokeSize*.0025),this.overlayCtx.moveTo(p.startX,p.startY),this.overlayCtx.lineTo(p.mouse.imageX,p.mouse.imageY),this.overlayCtx.stroke(),this.overlayCtx.beginPath());else if(p.strokeType===3){for(const[e,i]of p.strokePoints.entries())e===0?this.overlayCtx.moveTo(i.x,i.y):this.overlayCtx.lineTo(i.x,i.y);p.strokePoints.length>2&&this.overlayCtx.lineTo(p.strokePoints[0].x,p.strokePoints[0].y),this.overlayCtx.fill(),this.overlayCtx.beginPath()}}return this.overlayCanvas}static async preload(){return await f.drivers[h.source.driver].preload(h.settings.preload)}static updateTransform(){this.data!==null&&(this.data.transform=this.calculateTransform(this.data.element.width,this.data.element.height))}static calculateTransform(e,i){const s=m.canvas.width/m.canvas.height,n=e/i;let a,o;n>s?(a=m.canvas.width,o=m.canvas.width/n):(a=m.canvas.height*n,o=m.canvas.height);const u=3.5*parseFloat(getComputedStyle(document.documentElement).fontSize)*h.settings.resolution;return a*=.9,o*=.9,o-=u/2,{x:(m.canvas.width-a)/2,y:(m.canvas.height+u-o)/2,width:a,height:o,widthScale:a/e,heightScale:o/i}}static generateRandomStrokes(){if(this.data!==null){this.data.strokes=[];for(let e=0;e<(this.data.element.width+this.data.element.height)/50;e++)if(Math.random()>.1){const s=Math.random()*this.data.element.width,n=Math.random()*this.data.element.height,a=Math.random()*((this.data.element.width+this.data.element.width)/2.5),o=Math.random()*360*(Math.PI/180);this.data.strokes.push({type:Math.random()>.75?2:1,size:Math.max(.1,Math.random())*10,x1:s,y1:n,x2:s+a*Math.cos(o),y2:n+a*Math.sin(o)})}else{const s=Math.random()*this.data.element.width,n=Math.random()*this.data.element.height;this.data.strokes.push({type:2,size:Math.max(.5,Math.random())*25,x1:s,y1:n,x2:s,y2:n})}}}}function At(t,e){return localStorage.hasOwnProperty(t)?JSON.parse(localStorage.getItem(t)):e}const he=z({help:!1,settings:!1,entries:!1}),K=z(At("settings",{username:"unknown",fps:0,resolution:window.devicePixelRatio,preload:5,moveSpeed:1,scaleSpeed:1,randomStrokes:!1,reduceTransparency:!1})),Q=z(At("source",{driver:Object.keys(f.drivers)[0],value:"",display:"",locked:!1}));class h{static get layout(){return he.value}static get settings(){return K.value}static get source(){return Q.value}static get layoutSignal(){return he}static get settingsSignal(){return K}static get sourceSignal(){return Q}static updateLayout(e){he.value={...he.value,...e}}static updateSettings(e){K.value={...K.value,...e},localStorage.setItem("settings",JSON.stringify(K.value))}static updateSource(e){Q.value={...Q.value,...e},localStorage.setItem("source",JSON.stringify(Q.value))}}class p{static mouse={button:{left:0,right:0},editorX:0,editorY:0,imageX:0,imageY:0,trackpad:0};static keyboard=new Map;static strokeType=1;static strokeSize=2;static strokePoints=[];static strokeOpacity=1;static startX=null;static startY=null;static moveIndex=null;static saveConfirm=0;static skipConfirm=0;static reset(){this.strokePoints=[],this.startX=null,this.startY=null,this.moveIndex=null,this.keyboard.has("z")&&(this.saveConfirm=-1),this.keyboard.has("c")&&(this.skipConfirm=-1)}static update(e){if(f.data!==null&&(p.mouse.imageX=(this.mouse.editorX/m.camera.scale+(m.camera.x-f.data.transform.x))/f.data.transform.widthScale,p.mouse.imageY=(this.mouse.editorY/m.camera.scale+(m.camera.y-f.data.transform.y))/f.data.transform.heightScale,!h.settings.randomStrokes))if(this.mouse.button.left===1){if(this.strokeType==1||this.strokeType===2)this.startX=this.mouse.imageX,this.startY=this.mouse.imageY;else if(this.strokeType===3){for(let i=0;i<this.strokePoints.length;i++){const s=(f.data.transform.x+p.strokePoints[i].x*f.data.transform.widthScale-m.camera.x)*m.camera.scale,n=(f.data.transform.y+p.strokePoints[i].y*f.data.transform.heightScale-m.camera.y)*m.camera.scale;if(Math.hypot(s-this.mouse.editorX,n-this.mouse.editorY)<7.5*h.settings.resolution){this.moveIndex=i;break}}this.moveIndex===null&&(this.strokePoints.push({x:this.mouse.imageX,y:this.mouse.imageY}),f.renderImage())}}else if(this.mouse.button.right===1){if(this.strokeType===1||this.strokeType===2){const i=f.data.strokes[f.data.strokes.length-1];i!==void 0&&i.type===this.strokeType&&(this.startX=i.x2,this.startY=i.y2)}else if(this.strokeType===3)if(this.strokePoints.length===0){const i=f.data.strokes[f.data.strokes.length-1];i!==void 0&&i.type===3&&(this.strokePoints=f.data.strokes.splice(f.data.strokes.length-1,1)[0].points,f.renderImage())}else this.strokePoints.length>2&&(f.data.strokes.push({type:3,points:this.strokePoints}),f.renderImage()),this.strokePoints=[]}else this.mouse.button.left===2?this.moveIndex!==null&&(this.strokePoints[this.moveIndex]={x:this.mouse.imageX,y:this.mouse.imageY}):(this.mouse.button.left===3||this.mouse.button.right===3)&&((this.strokeType===1||this.strokeType===2)&&this.startX!==null&&this.startY!==null?(f.data.strokes.push({type:this.strokeType,size:this.strokeSize,x1:this.startX,y1:this.startY,x2:this.mouse.imageX,y2:this.mouse.imageY}),this.startX=null,this.startY=null,f.renderImage()):this.strokeType===3&&(this.moveIndex=null));p.strokeSize=Math.min(250/m.camera.scale,Math.max(1/m.camera.scale,p.strokeSize)),this.keyboard.get("Escape")===1?this.reset():this.keyboard.get("1")===1?(this.strokeType=1,this.strokePoints=[]):this.keyboard.get("2")===1?(this.strokeType=2,this.strokePoints=[]):this.keyboard.get("3")===1&&(this.strokeType=3,this.startX=null,this.startY=null),this.keyboard.get("-")===1?(p.strokeSize-=1,p.strokeSize=Math.min(100/m.camera.scale,Math.max(.5/m.camera.scale,p.strokeSize))):this.keyboard.get("=")===1&&(p.strokeSize+=1,p.strokeSize=Math.min(100/m.camera.scale,Math.max(.5/m.camera.scale,p.strokeSize))),this.keyboard.has("a")?m.camera.xSpeed=-2.5*h.settings.moveSpeed:this.keyboard.has("d")&&(m.camera.xSpeed=2.5*h.settings.moveSpeed),this.keyboard.has("w")?m.camera.ySpeed=-2.5*h.settings.moveSpeed:this.keyboard.has("s")&&(m.camera.ySpeed=2.5*h.settings.moveSpeed),this.keyboard.has("q")?m.camera.scaleSpeed=-.005*h.settings.scaleSpeed:this.keyboard.has("e")&&(m.camera.scaleSpeed=.005*h.settings.scaleSpeed),this.keyboard.get("r")===1?m.reset():this.keyboard.get("f")===1?(this.strokeOpacity-=.5,this.strokeOpacity<0&&(this.strokeOpacity=1),f.renderImage()):this.keyboard.get("x")===1&&(this.strokePoints.length>0?this.strokePoints.splice(this.strokePoints.length-1):f.data!==null&&f.data.strokes.length>0&&(f.data.strokes.splice(f.data.strokes.length-1),f.renderImage())),f.data!==null&&(this.keyboard.has("z")?this.skipConfirm>=0&&(this.skipConfirm+=.003*e,this.skipConfirm>1&&(f.next(),this.skipConfirm=-1)):this.skipConfirm=0,this.keyboard.has("c")?this.saveConfirm>=0&&(this.saveConfirm+=.003*e,this.saveConfirm>1&&(f.submit(),this.saveConfirm=-1)):this.saveConfirm=0),this.mouse.button.left===1?this.mouse.button.left=2:this.mouse.button.left===3&&(this.mouse.button.left=0),this.mouse.button.right===1?this.mouse.button.right=2:this.mouse.button.right===3&&(this.mouse.button.right=0),this.keyboard.forEach((i,s)=>{this.keyboard.set(s,2)})}}window.addEventListener("mousedown",t=>{t.target===m.canvas&&(t.button===0?p.mouse.button.left=1:t.button===2&&(p.mouse.button.right=1))});window.addEventListener("mouseup",t=>{t.button===0?p.mouse.button.left=3:t.button===2&&(p.mouse.button.right=3)});window.addEventListener("mousemove",t=>{p.mouse.editorX=t.x*h.settings.resolution,p.mouse.editorY=t.y*h.settings.resolution});window.addEventListener("wheel",t=>{t.target===m.canvas&&(t.ctrlKey===!0?(Math.abs(t.deltaY-p.mouse.trackpad)>.2&&(m.camera.scaleSpeed=.002*-t.deltaY,p.mouse.trackpad=t.deltaY),t.preventDefault()):p.strokeSize+=-t.deltaY/(10*m.camera.scale))},{passive:!1});window.addEventListener("keydown",t=>{t.target===document.body&&(p.keyboard.has(t.key)||p.keyboard.set(t.key,1))});window.addEventListener("keyup",t=>{p.keyboard.delete(t.key)});let Re=0,Te=0,ue=0,Pe=0;function ri(t){const e=Math.hypot(p.mouse.imageX*m.camera.scale-Re,p.mouse.imageY*m.camera.scale-Te);e>25&&(ue=Math.atan2(p.mouse.imageY*m.camera.scale-Te,p.mouse.imageX*m.camera.scale-Re),Re+=(e-25)*Math.cos(ue),Te+=(e-25)*Math.sin(ue));let i=ue-Pe;for(;i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;return Pe+=i*(.025*t),Pe}class m{static canvas=document.getElementById("canvas-main");static ctx=this.canvas.getContext("2d");static camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0};static resize(){const e=this.canvas.getBoundingClientRect();this.canvas.width=e.width*h.settings.resolution,this.canvas.height=e.height*h.settings.resolution,f.updateTransform(),h.settings.fps!==0&&this.update(0)}static reset(){this.camera={x:0,xSpeed:0,y:0,ySpeed:0,scale:1,scaleSpeed:0}}static update(e){const i=this.camera.x,s=this.camera.y,n=this.camera.scale;this.camera.scale*=1+this.camera.scaleSpeed*e,this.camera.scale=Math.min(500,this.camera.scale);const a=i+p.mouse.editorX/n,o=s+p.mouse.editorY/n,u=this.camera.scale/n;if(this.camera.x=a+(i-a)/u,this.camera.y=o+(s-o)/u,this.camera.x+=this.camera.xSpeed*e/this.camera.scale*h.settings.resolution,this.camera.y+=this.camera.ySpeed*e/this.camera.scale*h.settings.resolution,this.camera.xSpeed*=Math.pow(.99,e),this.camera.ySpeed*=Math.pow(.99,e),this.camera.scaleSpeed*=Math.pow(.99,e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,f.data!==null){const d=f.data.transform;if(p.skipConfirm>0&&(this.ctx.globalAlpha=1-p.skipConfirm),this.ctx.drawImage(f.data.element,(d.x-this.camera.x)*this.camera.scale,(d.y-this.camera.y)*this.camera.scale,d.width*this.camera.scale,d.height*this.camera.scale),this.ctx.drawImage(f.canvas,(d.x-this.camera.x)*this.camera.scale,(d.y-this.camera.y)*this.camera.scale,d.width*this.camera.scale,d.height*this.camera.scale),this.ctx.globalAlpha=1,!h.settings.randomStrokes){if(this.ctx.drawImage(f.renderOverlay(),(d.x-this.camera.x)*this.camera.scale,(d.y-this.camera.y)*this.camera.scale,d.width*this.camera.scale,d.height*this.camera.scale),this.ctx.fillStyle="rgba(255,0,0,0.5)",this.ctx.strokeStyle="rgba(255,0,0,0.5)",(p.strokeType===1||p.strokeType===2)&&p.startX===null&&p.startY===null){if(this.ctx.arc(p.mouse.editorX,p.mouse.editorY,(f.data.transform.width+f.data.transform.height)*(p.strokeSize/2*.0025)*this.camera.scale,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),p.strokeType===1){const c=ri(e)+Math.PI/2,g=(f.data.transform.width+f.data.transform.height)*(p.strokeSize/2*.0025)*m.camera.scale,l=p.mouse.editorX+g*Math.cos(c),v=p.mouse.editorY+g*Math.sin(c),_=p.mouse.editorX+g*Math.cos(c+Math.PI),$=p.mouse.editorY+g*Math.sin(c+Math.PI);this.ctx.lineCap="butt",this.ctx.lineWidth=2.5*h.settings.resolution,this.ctx.moveTo(l,v),this.ctx.lineTo(_,$),this.ctx.stroke(),this.ctx.beginPath()}}else if(p.strokeType===3)for(const c of p.strokePoints)this.ctx.arc((f.data.transform.x+c.x*f.data.transform.widthScale-this.camera.x)*this.camera.scale,(f.data.transform.y+c.y*f.data.transform.heightScale-this.camera.y)*this.camera.scale,5*h.settings.resolution,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath()}p.saveConfirm>0&&(this.ctx.fillStyle=`rgba(255,255,255,${p.saveConfirm})`,this.ctx.fillRect((d.x-this.camera.x)*this.camera.scale,(d.y-this.camera.y)*this.camera.scale,d.width*this.camera.scale,d.height*this.camera.scale))}}}window.addEventListener("load",()=>{m.resize(),window.addEventListener("resize",()=>m.resize())});m.canvas.addEventListener("contextmenu",t=>{t.preventDefault()});m.canvas.addEventListener("click",()=>{h.updateLayout({help:!1,settings:!1,entries:!1})});const oi=()=>{const t=s=>{const n=s.substring(0,20).toLowerCase().split("");for(let a=n.length-1;a>=0;a--)"abcdefghijklmnopqrstuvwxyz0123456789".includes(n[a])||n.splice(a,1);n.length>=5&&h.updateSettings({username:n.slice(0,16).join("")})},e=s=>{m.camera.x/=h.settings.resolution,m.camera.y/=h.settings.resolution,h.updateSettings({resolution:s}),m.camera.x*=h.settings.resolution,m.camera.y*=h.settings.resolution,m.resize()},i=s=>{h.updateSettings({randomStrokes:s}),f.data!==null&&(s?(f.generateRandomStrokes(),f.renderImage()):(f.data.strokes=[],f.renderImage()))};return r("div",{class:"shadow",style:{display:h.layout.settings?"block":"none",border:"0.05rem solid ",borderRadius:"0.5rem",marginRight:"var(--spacing-medium)",marginBottom:"var(--spacing-medium)",overflow:"hidden"},children:[r("h3",{class:h.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{padding:"var(--spacing-medium)"},children:"Settings"}),r("div",{class:h.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",children:[r("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),r("div",{style:{padding:"var(--spacing-medium)"},children:[r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Username:"}),r("input",{value:h.settings.username,onChange:s=>t(s.target.value)})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"FPS:"}),r("input",{type:"range",step:"10",min:"0",max:"120",value:h.settings.fps,onInput:s=>h.updateSettings({fps:parseInt(s.target.value)}),style:{marginRight:"var(--spacing-small)"}}),r("p",{children:h.settings.fps===0?"(VSync)":`(${h.settings.fps})`})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Resolution:"}),r("input",{type:"range",step:"0.1",min:"0.1",max:"2",value:h.settings.resolution,onInput:s=>e(parseFloat(s.target.value)),style:{marginRight:"var(--spacing-small)"}}),r("p",{children:h.settings.resolution===window.devicePixelRatio?"(Native)":`(${h.settings.resolution}x)`})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Preload Image:"}),r("input",{type:"range",step:"1",min:"0",max:"10",value:h.settings.preload,onInput:s=>h.updateSettings({preload:parseInt(s.target.value)}),style:{marginRight:"var(--spacing-small)"}}),r("p",{children:h.settings.preload===5?"(Default)":`(${h.settings.preload})`})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Move Speed:"}),r("input",{type:"range",step:"0.1",min:"0.1",max:"1.5",value:h.settings.moveSpeed,onInput:s=>h.updateSettings({moveSpeed:parseFloat(s.target.value)}),style:{marginRight:"var(--spacing-small)"}}),r("p",{children:h.settings.moveSpeed===1?"(Default)":`(${h.settings.moveSpeed}x)`})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-big)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Scale Speed:"}),r("input",{type:"range",step:"0.1",min:"0.5",max:"1.5",value:h.settings.scaleSpeed,onInput:s=>h.updateSettings({scaleSpeed:parseFloat(s.target.value)}),style:{marginRight:"var(--spacing-small)"}}),r("p",{children:h.settings.scaleSpeed===1?"(Default)":`(${h.settings.scaleSpeed}x)`})]}),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"var(--spacing-tiny)"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Random Strokes:"}),r("input",{type:"checkbox",checked:h.settings.randomStrokes,onChange:s=>i(s.target.checked)})]}),r("div",{style:{display:"flex",alignItems:"center"},children:[r("p",{style:{textWrap:"nowrap",marginRight:"var(--spacing-small)"},children:"Reduce Transparency:"}),r("input",{type:"checkbox",checked:h.settings.reduceTransparency,onChange:s=>h.updateSettings({reduceTransparency:s.target.checked})})]})]})]})]})},y=z(null),E=z({provider:"all",author:"all"}),N=z({top:0,bottom:0});class L{static loading=0;static async loadEntries(){y.value=null;const e=await(await fetch("/api/list")).json(),i=[],s=[];for(const n of e){const a=n.split("-");i.includes(a[0])||i.push(a[0]),s.includes(a[3])||s.push(a[3])}y.value={entries:e,filtered:[],providers:i,authors:s},this.updateFilter({})}static filterEntries(){if(y.value!==null){const e=[];for(const i of y.value.entries){const s=i.split("-");(E.value.provider==="all"||s[0]===E.value.provider)&&(E.value.author==="all"||s[3]===E.value.author)&&e.push(i)}y.value={entries:y.value.entries,filtered:e,providers:y.value.providers,authors:y.value.authors}}Be(()=>{N.value={top:0,bottom:0},this.loadBottom(10,20)})}static updateFilter(e){E.value=Object.assign(E.value,e),y.value!==null&&(E.value.provider!=="all"&&!y.value.providers.includes(E.value.provider)&&(E.value.provider=y.value.providers.length>0?y.value.providers[0]:"all"),E.value.author!=="all"&&!y.value.authors.includes(E.value.author)&&(E.value.author=y.value.authors.length>0?y.value.authors[0]:"all")),this.filterEntries()}static loadTop(e,i){if(y.value!==null){let s=N.value.top,n=N.value.bottom;if(Math.abs(s-n)>i)for(let a=0;a<e;a++)n--;for(let a=0;a<e&&s>0;a++)s--;N.value={top:s,bottom:n}}}static loadBottom(e,i){if(y.value!==null){let s=N.value.top,n=N.value.bottom;if(Math.abs(s-n)>i)for(let a=0;a<e;a++)s++;for(let a=0;a<e&&n<y.value.filtered.length;a++)n++;N.value={top:s,bottom:n}}}}const li=t=>{const e=ee(null),i=ee(null),s=ee(!1),n=ee(!1),[a,o]=bt(!0),u=()=>{s.current||(s.current=!0,L.loading--)},d=()=>{n.current||(n.current=!0,L.loading--)},c=()=>{f.drivers.hasOwnProperty(l[0])&&(f.next({driver:l[0],id:l[1],page:l[2]}),h.updateLayout({help:!1,settings:!1,entries:!1}))},g=async()=>{if(y.value!==null){await fetch(`/api/remove/${t}`,{method:"DELETE"});const v=y.value.entries.indexOf(t),_=[...y.value.entries.slice(0,v),...y.value.entries.slice(v+1)],$=y.value.filtered.indexOf(t),M=[...y.value.filtered.slice(0,$),...y.value.filtered.slice($+1)],I=[],x=[];for(const w of _){const O=w.split("-");I.includes(O[0])||I.push(O[0]),x.includes(O[3])||x.push(O[3])}Be(()=>{y.value={entries:_,filtered:M,providers:I,authors:x},N.value={top:Math.min(_.length-1,N.value.top),bottom:Math.min(_.length-1,N.value.bottom)}})}};kt(()=>(L.loading+=2,()=>{L.loading-=s.current?0:1,L.loading-=n.current?0:1}),[]);const l=t.split("-");return r("div",{children:[r("div",{style:{position:"relative",width:"100%",marginBottom:"-0.25rem",userSelect:"none"},children:[r("img",{ref:e,src:`/resource/image/${t}`,onLoad:u,style:{contentVisibility:"auto",borderRadius:"0.25rem 0.25rem 0rem 0rem",width:"100%"}}),r("img",{ref:i,src:`/resource/mask/${t}`,onLoad:d,onClick:()=>o(!a),style:{position:"absolute",contentVisibility:"auto",borderRadius:"0.25rem 0.25rem 0rem 0rem",left:"0rem",top:"0rem",width:"100%",filter:"invert(46%) sepia(88%) saturate(3060%) hue-rotate(87deg) brightness(126%) contrast(119%)",opacity:a?1:0,cursor:"pointer"}})]}),r("div",{style:{display:"flex",backgroundColor:"var(--color-container-light)",borderRadius:"0rem 0rem 0.25rem 0.25rem",padding:"var(--spacing-small)"},children:[r("h5",{style:{marginRight:"var(--spacing-tiny)"},children:[f.drivers.hasOwnProperty(l[0])?f.drivers[l[0]].name:l[0],":"]}),r("p",{style:{flex:1,marginRight:"var(--spacing-small)"},children:[l[1],"/",l[2]," (",l[3],")"]}),r("button",{onClick:g,style:{marginRight:"var(--spacing-small)",cursor:"pointer"},children:"Remove"}),r("button",{onClick:c,style:{cursor:"pointer"},children:"Edit"})]})]},t)},ci=()=>{const t=ee(null);return kt(()=>{if(t.current!==null){const e=setInterval(()=>{y.value!==null&&L.loading===0&&(t.current.scrollTop<window.innerHeight/5?L.loadTop(10,20):Math.round(t.current.scrollTop+t.current.clientHeight)>=t.current.scrollHeight-window.innerHeight/5&&L.loadBottom(10,20))},100);return()=>{clearInterval(e)}}}),r("div",{class:"shadow",style:{display:h.layout.entries?"flex":"none",flexDirection:"column",border:"0.05rem solid ",borderRadius:"0.5rem",width:"50rem",maxWidth:"calc(100dvw - calc(var(--spacing-medium) * 2))",maxHeight:"calc(100dvh - calc(3.5rem + calc(var(--spacing-medium) * 2)))",overflow:"hidden"},children:[r("div",{class:h.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{display:"flex",padding:"var(--spacing-medium)"},children:[r("div",{style:{flex:1,display:"flex",alignItems:"center",marginRight:"var(--spacing-medium)"},children:[r("h3",{children:"Entries"}),y.value===null?void 0:r("p",{style:{marginLeft:"var(--spacing-small)",opacity:.5},children:["(Found ",y.value.filtered.length," / ",y.value.entries.length,")"]})]}),y.value===null?r("select",{disabled:!0,style:{marginRight:"var(--spacing-small)"},children:r("option",{selected:!0,children:"Loading..."})}):r("select",{value:E.value.provider,onChange:e=>L.updateFilter({provider:e.target.value}),style:{marginRight:"var(--spacing-small)"},children:[r("option",{value:"all",children:"All Providers"})].concat(y.value.providers.map(e=>r("option",{value:e,selected:e===E.value.provider,children:f.drivers.hasOwnProperty(e)?f.drivers[e].name:e})))}),y.value===null?r("select",{disabled:!0,style:{marginRight:"var(--spacing-small)"},children:r("option",{selected:!0,children:"Loading..."})}):r("select",{value:E.value.author,onChange:e=>L.updateFilter({author:e.target.value}),style:{marginRight:"var(--spacing-small)"},children:[r("option",{value:"all",children:"All Authors"})].concat(y.value.authors.map(e=>r("option",{value:e,children:e})))}),r("button",{disabled:y.value===null,onClick:()=>L.loadEntries(),style:{cursor:"pointer"},children:"Refresh"})]}),r("div",{class:h.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[r("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),y.value===null?r("div",{style:{padding:"var(--spacing-medium)"},children:r("p",{style:{textAlign:"center",opacity:.5},children:"Loading..."})}):r("div",{ref:t,style:{flex:1,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"var(--spacing-small)",padding:"var(--spacing-medium)",overflowY:"scroll"},children:y.value.filtered.slice(N.value.top,N.value.bottom).map(e=>li(e))})]})]})};h.layoutSignal.subscribe(t=>{t.entries&&y.value===null&&(L.loadEntries(),L.filterEntries())});const hi=()=>{const t=async i=>{h.updateSource({driver:i}),await f.next()},e=async i=>{h.updateSource({value:i,display:i}),await f.next()};return r("nav",{class:h.settings.reduceTransparency?"container-solid-light shadow":"container-glassy-light shadow",style:{position:"fixed",display:"flex",alignItems:"center",left:"0rem",top:"0rem",width:"100%",height:"3.5rem"},children:[r("h1",{style:{textWrap:"nowrap",marginLeft:"var(--spacing-medium)",marginRight:"var(--spacing-medium)"},children:"Dataset Editor"}),r("button",{onClick:()=>h.updateLayout({help:!h.layout.help}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Help"}),r("button",{onClick:()=>h.updateLayout({settings:!h.layout.settings}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Settings"}),r("div",{style:"flex: 1"}),r("select",{value:h.source.driver,disabled:h.source.locked,onChange:i=>t(i.target.value),style:{marginRight:"var(--spacing-small)"},children:Object.keys(f.drivers).map(i=>r("option",{value:f.drivers[i].id,children:f.drivers[i].name}))}),r("input",{value:h.source.display,autocomplete:"off",disabled:h.source.locked,onChange:i=>e(i.target.value),style:{width:"7.5rem",marginRight:"var(--spacing-small)"}}),r("button",{onClick:()=>h.updateLayout({entries:!h.layout.entries}),style:{marginRight:"var(--spacing-medium)",cursor:"pointer"},children:"Entries"})]})},ui=()=>r("div",{class:"shadow",style:{display:h.layout.help?"block":"none",border:"0.05rem solid ",borderRadius:"0.5rem",marginRight:"var(--spacing-medium)",marginBottom:"var(--spacing-medium)",overflow:"hidden"},children:[r("h3",{class:h.settings.reduceTransparency?"container-solid-light":"container-glassy-light",style:{padding:"var(--spacing-medium)"},children:"Help"}),r("div",{class:h.settings.reduceTransparency?"container-solid-dark":"container-glassy-dark",children:[r("div",{style:{width:"100%",height:"0.05rem",backgroundColor:"var(--color-foreground)",opacity:.1}}),r("div",{style:{padding:"var(--spacing-medium)"},children:[r("p",{style:{marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"W"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"A"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"S"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"D"}),r("span",{style:{marginRight:"var(--spacing-tiny)"},children:"to move,"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"E"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Q"}),r("span",{children:"to zoom in and out."})]}),r("p",{style:{marginBottom:"var(--spacing-big)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"R"}),r("span",{children:"to reset the camera."})]}),r("p",{style:{marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"1"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"2"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"3"}),r("span",{children:"to change the stroke type."})]}),r("p",{style:{marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Mouse Wheel"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"+"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"="}),r("span",{children:"to change the stroke size."})]}),r("p",{style:{marginBottom:"var(--spacing-big)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"F"}),r("span",{children:"to change the stroke opacity."})]}),r("h5",{style:{marginBottom:"var(--spacing-small)"},children:"Stroke Type 1 or 2"}),r("p",{style:{lineHeight:"var(--size-big)",marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Left Click"}),r("span",{children:"to draw."})]}),r("p",{style:{marginBottom:"var(--spacing-big)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Right Click"}),r("span",{children:"to continue from the last stroke."})]}),r("h5",{style:{marginBottom:"var(--spacing-small)"},children:"Stroke Type 3"}),r("p",{style:{lineHeight:"var(--size-big)",marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Left Click"}),r("span",{children:"to add a point or move a point."})]}),r("p",{style:{marginBottom:"var(--spacing-big)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Right Click"}),r("span",{children:"to complete or edit the last shape."})]}),r("p",{style:{marginBottom:"var(--spacing-small)"},children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"X"}),r("span",{children:"to delete the last stroke or point."})]}),r("p",{children:[r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"Z"}),r("span",{style:{marginRight:"var(--spacing-tiny)"},children:"to skip the image,"}),r("span",{class:"key",style:{marginRight:"var(--spacing-tiny)"},children:"C"}),r("span",{children:"to submit."})]})]})]})]});be(r(ui,{}),document.getElementById("container-help"));be(r(hi,{}),document.getElementById("container-navbar"));be(r(oi,{}),document.getElementById("container-settings"));be(r(ci,{}),document.getElementById("container-entries"));let Ee=performance.now();function je(){const t=performance.now()-Ee;Ee=performance.now(),document.hasFocus()&&(p.update(t),m.update(t)),h.settings.fps===0?requestAnimationFrame(je):setTimeout(je,1e3/h.settings.fps-(performance.now()-Ee))}let jt=!0;async function ve(){try{const t=await f.drivers[h.source.driver].preload(h.settings.preload);t===null?setTimeout(ve,100):(await fetch(t.url),ve())}catch{jt=!1}}window.addEventListener("load",()=>{je(),ve(),f.next(),h.sourceSignal.subscribe(()=>{jt||ve()})});
